<!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for WSO2 Enterprise Integrator">
      
      
        <link rel="canonical" href="https://wso2.com/integration/references/payloadFactory-Mediator/">
      
      
        <meta name="author" content="WSO2">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>PayloadFactory Mediator - WSO2 Enterprise Integrator Documentation</title>
      
    
    
  
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
  <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">

    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/lib/highlightjs/default.min.css">
    
      <link rel="stylesheet" href="../../assets/css/theme.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#payloadfactory-mediator" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<header class="md-header" data-md-component="header" id="page-header" data-url="" data-lang="en">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
               Enterprise Integrator Documentation
            </span>
            <span class="md-header-nav__topic">
              PayloadFactory Mediator
            </span>
          
        </div>
        <div class="md-flex__ellipsis md-header__version-select">
            <div class="mb-tabs__dropdown version-select">
                <a class="md-tabs__link md-tabs__dropdown-link" href="#!" data-target="version-select-dropdown">7.0.0</a>
                <ul id="version-select-dropdown" class="mb-tabs__dropdown-content" tabindex="0">
                    <!-- Versions will added here dynamically -->
                    <li class="md-tabs__item mb-tabs__dropdown">
                        <a href="#" id="show-all-versions-link">Show all</a>
                    </li>
                </ul>
            </div>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item home_icon">
    
      <a href="../.." title="Home" class="md-tabs__link md-tabs__link--active">
          <i class="fa fa-home"></i>
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../overview/introduction/" title="Introduction" class="md-tabs__link">
          Introduction
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-tabs__link">
          Quick Start Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../concepts.md" title="Concepts" class="md-tabs__link">
          Concepts
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../setup/install_in_vm/" title="Setup and Install" class="md-tabs__link">
          Setup and Install
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../develop/design.md" title="Developer Experience" class="md-tabs__link">
          Developer Experience
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../samples/invoking_restful_service.md" title="Use Cases" class="md-tabs__link">
          Use Cases
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../admin/user_management.md" title="Administration and Observability" class="md-tabs__link">
          Administration and Observability
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../ei_config_catalog/" title="References" class="md-tabs__link">
          References
        </a>
      
    </li>
  

      
        
      
    </ul>
    <div class="quick_links">
        
        <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/payloadFactory-Mediator.md" target="blank" id="editIcon" title="Edit this page"
           title="Edit this page" class="md-icon md-content__icon nav_link edit_link">Óèâ</a>
        
    </div>
    <a href="#" title="Report Issues" class="feedbackBtn" 
        onclick=window.open("https://github.com/"+"wso2/docs-ei"+"/issues/new?title=Doc%20Feedback:&body=Location%20:%20"+window.location.href); >
        Report Issues</a>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
    <label class="md-nav__title md-nav__title--site" for="__drawer">
      <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation"
         class="md-nav__button md-logo">
        
          <img src="../../images/logo.svg" width="48" height="48">
        
      </a>
      WSO2 Enterprise Integrator Documentation
    </label>
    
      <div class="md-nav__source">
        


  

<a href="https://github.com/wso2/docs-ei/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    wso2/docs-ei
  </div>
</a>
      </div>
    
    <ul class="md-nav__list" data-md-scrollfix>
      
        
        
        


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/introduction/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/about-this-release/" title="About this Release" class="md-nav__link">
      About this Release
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Quick Start Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Quick Start Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-nav__link">
      Quick Start Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts.md" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Setup and Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Setup and Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Installation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Installation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_vm/" title="Install in a VM" class="md-nav__link">
      Install in a VM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_docker/" title="Install in Docker" class="md-nav__link">
      Install in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_kubernetes/" title="Install in Kubernetes" class="md-nav__link">
      Install in Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Product Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Product Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deploying_wso2_ei/" title="Deploying WSO2 Enterprise Integrator" class="md-nav__link">
      Deploying WSO2 Enterprise Integrator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/upgrading/" title="Upgrading from a Previous Release" class="md-nav__link">
      Upgrading from a Previous Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/troubleshooting_deployment/" title="Troubleshooting Production Deployment" class="md-nav__link">
      Troubleshooting Production Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4" type="checkbox" id="nav-5-2-4">
    
    <label class="md-nav__link" for="nav-5-2-4">
      Supporting Configurations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-4">
        Supporting Configurations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/registry_mounting/" title="Optional: Mounting a Registry" class="md-nav__link">
      Optional: Mounting a Registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_lb/" title="Setting up a Load Balancer" class="md-nav__link">
      Setting up a Load Balancer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_synchronization/" title="Configuring Deployment Synchronization" class="md-nav__link">
      Configuring Deployment Synchronization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-4" type="checkbox" id="nav-5-2-4-4">
    
    <label class="md-nav__link" for="nav-5-2-4-4">
      Setting up Databases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-4">
        Setting up Databases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MySQL/" title="Setting up MySQL" class="md-nav__link">
      Setting up MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MSSQL/" title="Setting up MSSQL" class="md-nav__link">
      Setting up MSSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle/" title="Setting up Oracle" class="md-nav__link">
      Setting up Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle-RAC/" title="Setting up Oracle RAC" class="md-nav__link">
      Setting up Oracle RAC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-Informix/" title="Setting up IBM Informix" class="md-nav__link">
      Setting up IBM Informix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-DB2/" title="Setting up IBM DB2" class="md-nav__link">
      Setting up IBM DB2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MariaDB/" title="Setting up Maria DB" class="md-nav__link">
      Setting up Maria DB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Embedded-Derby/" title="Setting up Embedded Derby" class="md-nav__link">
      Setting up Embedded Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-Derby/" title="Setting up Remote Derby" class="md-nav__link">
      Setting up Remote Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-PostgreSQL/" title="Setting up PostgreSQL" class="md-nav__link">
      Setting up PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-H2/" title="Setting up Remote H2" class="md-nav__link">
      Setting up Remote H2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-5" type="checkbox" id="nav-5-2-4-5">
    
    <label class="md-nav__link" for="nav-5-2-4-5">
      Setting up a User Store
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-5">
        Setting up a User Store
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_jdbc_userstore/" title="Setting up a JDBC User Store" class="md-nav__link">
      Setting up a JDBC User Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_ro_ldap/" title="Setting up a Read-Only LDAP" class="md-nav__link">
      Setting up a Read-Only LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ldap/" title="Setting up a Read-Write LDAP" class="md-nav__link">
      Setting up a Read-Write LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ad/" title="Setting up a Read-Write Active Directory" class="md-nav__link">
      Setting up a Read-Write Active Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5" type="checkbox" id="nav-5-2-5">
    
    <label class="md-nav__link" for="nav-5-2-5">
      Security Hardening
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-5">
        Security Hardening
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5-1" type="checkbox" id="nav-5-2-5-1">
    
    <label class="md-nav__link" for="nav-5-2-5-1">
      Setting up Keystores
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-5-1">
        Setting up Keystores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/creating_keystores.md" title="Creating New Keystores" class="md-nav__link">
      Creating New Keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/importing_ssl_certificate.md" title="Adding SSL certificates to keystores" class="md-nav__link">
      Adding SSL certificates to keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/renewing_ca_signed_certificate_in_keystore.md" title="Renewing a CA-signed Certificate" class="md-nav__link">
      Renewing a CA-signed Certificate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/configuring_keystores.md" title="Configuring Keystores" class="md-nav__link">
      Configuring Keystores
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/single_key_encryption.md" title="Using Symmetric Encryption" class="md-nav__link">
      Using Symmetric Encryption
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/encrypting_plain_text.md" title="Encrypting Plain Text" class="md-nav__link">
      Encrypting Plain Text
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_csrf.md" title="Mitigating Cross Site Request Forgery Attacks" class="md-nav__link">
      Mitigating Cross Site Request Forgery Attacks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_css.md" title="Mitigating Cross Site Scripting" class="md-nav__link">
      Mitigating Cross Site Scripting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-6" type="checkbox" id="nav-5-2-6">
    
    <label class="md-nav__link" for="nav-5-2-6">
      Performance Tuning
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-6">
        Performance Tuning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/tuning_db_performance/" title="Tuning Database Performance" class="md-nav__link">
      Tuning Database Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/network_os_performance/" title="Tuning Network and OS Performance" class="md-nav__link">
      Tuning Network and OS Performance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/backup_recovery/" title="Backup and Recovery" class="md-nav__link">
      Backup and Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_checklist/" title="Product Deployment Checklist" class="md-nav__link">
      Product Deployment Checklist
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developer Experience
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developer Experience
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/design.md" title="Designing an Integration Use Case" class="md-nav__link">
      Designing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/testing.md" title="Testing an Integration Use Case" class="md-nav__link">
      Testing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/cicd.md" title="Continuous Development and Deployment" class="md-nav__link">
      Continuous Development and Deployment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Samples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../samples/invoking_restful_service.md" title="Invoking a RESTful Service" class="md-nav__link">
      Invoking a RESTful Service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/message_routing.md" title="Message Routing" class="md-nav__link">
      Message Routing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Administration and Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Administration and Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/user_management.md" title="User Management" class="md-nav__link">
      User Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      References
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ei_config_catalog/" title="Configuration Catalog" class="md-nav__link">
      Configuration Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      Mediator Catalog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        Mediator Catalog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mediator_catalog.md" title="Mediator Catlog" class="md-nav__link">
      Mediator Catlog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../working-with-Mediators-via-Tooling/" title="Working with Mediators via Tooling" class="md-nav__link">
      Working with Mediators via Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2-3" type="checkbox" id="nav-9-2-3">
    
    <label class="md-nav__link" for="nav-9-2-3">
      ESB Mediators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-9-2-3">
        ESB Mediators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="ESB Mediators" class="md-nav__link">
      ESB Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Aggregate Mediators" class="md-nav__link">
      Aggregate Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Bean Mediator" class="md-nav__link">
      Bean Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Builder Mediator" class="md-nav__link">
      Builder Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Cache Mediator" class="md-nav__link">
      Cache Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Mediator" class="md-nav__link">
      Call Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Template Mediator" class="md-nav__link">
      Call Template Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Callout Mediator" class="md-nav__link">
      Callout Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Class Mediator" class="md-nav__link">
      Class Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Conditional Router Mediator" class="md-nav__link">
      Conditional Router Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Data Mapper Mediator" class="md-nav__link">
      Data Mapper Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../property_catalog.md" title="Property Catalog" class="md-nav__link">
      Property Catalog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item">
    <a href="../../page-not-found.md" title="" class="md-nav__link">
      
    </a>
  </li>

      
    </ul>
  </nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
    
    
    
    
    
    <a href="#" title="On this page" class="nav_link md-icon md-content__icon toc_icon" id="tocToggleBtn">toc</a>
    <label class="md-nav__title" for="__toc">On this page</label>
    <ul class="md-nav__list" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#syntax" title="Syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-2-json" title="Example 2: JSON" class="md-nav__link">
    Example 2: JSON
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-adding-arguments" title="Example 3: Adding arguments" class="md-nav__link">
    Example 3: Adding arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-5-including-a-complete-soap-envelope-as-the-format" title="Example 5: Including a complete SOAP envelope as the format" class="md-nav__link">
    Example 5: Including a complete SOAP envelope as the format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-6-uploading-a-file-to-an-http-endpoint-via-a-multipart-request" title="Example 6: Uploading a file to an HTTP endpoint via a multipart request" class="md-nav__link">
    Example 6: Uploading a file to an HTTP endpoint via a multipart request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-7-adding-a-literal-argument" title="Example 7: Adding a literal argument" class="md-nav__link">
    Example 7: Adding a literal argument
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-8-adding-a-custom-soap-header" title="Example 8: Adding a custom SOAP header" class="md-nav__link">
    Example 8: Adding a custom SOAP header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samples" title="Samples" class="md-nav__link">
    Samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        
        
        
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
                
                  <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/payloadFactory-Mediator.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="payloadfactory-mediator">PayloadFactory Mediator<a class="headerlink" href="#payloadfactory-mediator" title="Permanent link">&para;</a></h1>
<p>The <strong>PayloadFactory Mediator</strong> transforms or replaces the contents of a
message. Each argument in the mediator configuration can be a static
value, or you can specify an XPath or JSON expression to get the value
at runtime by evaluating the provided expression against the existing
SOAP message. You can configure the format of the request or response
and map it to the arguments provided.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>The PayloadFactory mediator is a <a href="ESB-Mediators_119131045.html#ESBMediators-Content-awareness">content
aware</a>
mediator.</p>
<hr />
<p><a href="#PayloadFactoryMediator-Syntax">Syntax</a> |
<a href="#PayloadFactoryMediator-Configuration">Configuration</a></p>
<hr />
<h3 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-java linenums">    &lt;payloadFactory media-type="xml | json"&gt;
        &lt;format ../&gt;
        &lt;args&gt;       
            &lt;arg (value="string" | expression=" {xpath} | {json} | {text} ")/&gt;* 
        &lt;/args&gt; 
    &lt;/payloadFactory&gt;</code></pre>

<p>The <code class="codehilite">media-type</code> attribute specifies whether to format
the message in XML, JSON, or text. If no media type is specified, the
message is formatted in XML. If you want to change the payload type of
the outgoing message, such as to change it to JSON, add the
<code class="codehilite">messageType</code> property after the
<code class="codehilite">&lt;/payloadFactory&gt;</code> tag. For example:</p>
<p>``` html/xml
    ...
    </payloadFactory>
    <property name="messageType" value="application/json" scope="axis2"/>
<pre class="codehilite"><code class="linenums">


------------------------------------------------------------------------

### Configuration

Parameters available to configure the PayloadFactory mediator are as
follows:

&lt;table&gt;
&lt;thead&gt;
&lt;tr class="header"&gt;
&lt;th&gt;Parameter Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class="odd"&gt;
&lt;td&gt;&lt;strong&gt;Payload Media-Type&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;This parameter is used to specify whether the message payload should be created in JSON, XML, or text.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="even"&gt;
&lt;td&gt;&lt;strong&gt;Payload Format&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;&lt;strong&gt;Define Inline&lt;/strong&gt; : If this is selected, the payload format can be defined within the PayloadFactory mediator configuration by entering it in the text field which appears. To add content to the payload, enter variables for each value you want to add using the format $ &lt;em&gt;n&lt;/em&gt; (starting with 1 and incrementing with each additional variable, i.e., $1, $2, etc.). You will then create arguments in the same order as the variables to specify each variable's actual value.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pick from Registry&lt;/strong&gt; : If this is selected, an existing payload format which is saved in the Registry can be selected. Click either &lt;strong&gt;Governance Registry&lt;/strong&gt; or &lt;strong&gt;Configuration Registry&lt;/strong&gt; as relevant to select the payload format from the resource tree.&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="odd"&gt;
&lt;td&gt;&lt;strong&gt;Arguments&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;div class="content-wrapper"&gt;
&lt;p&gt;This section is used to add an argument that defines the actual value of each variable in the format definition. The arguments must be entered in the same order as the variables in the format, so that the first argument defines the value for variable $1, the second argument defines the value for variable $2, etc. An argument can specify a literal string (e.g., "John") or an XPath or JSON expression that extracts the value from the content in the incoming payload.&lt;/p&gt;
&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Examples

-   [Example 1: XML](#PayloadFactoryMediator-Example1:XML)
-   [Example 2: JSON](#PayloadFactoryMediator-Example2:JSON)
-   [Example 3: Adding
    arguments](#PayloadFactoryMediator-Example3:Addingarguments)
-   [Example 4: Suppressing the
    namespace](#PayloadFactoryMediator-Example4:Suppressingthenamespace)
-   [Example 5: Including a complete SOAP envelope as the
    format](#PayloadFactoryMediator-Example5:IncludingacompleteSOAPenvelopeastheformat)
-   [Example 6: Uploading a file to an HTTP endpoint via a multipart
    request](#PayloadFactoryMediator-Example6:UploadingafiletoanHTTPendpointviaamultipartrequest)
-   [Example 7: Adding a literal
    argument](#PayloadFactoryMediator-Example7:Addingaliteralargument)
-   [Example 8: Adding a custom SOAP
    header](#PayloadFactoryMediator-Example8:AddingacustomSOAPheader)
-   [Samples](#PayloadFactoryMediator-Samples)

This section provides examples of using PayloadFactory mediator to
generate XML and JSON messages.

#### Example 1: XML

This example is based on [Sample 17: Transforming / Replacing Message
Content with PayloadFactory
Mediator](https://docs.wso2.com/pages/viewpage.action?pageId=50500282) .

``` html/xml
    &lt;definitions xmlns="http://ws.apache.org/ns/synapse"&gt;
        &lt;sequence name="main"&gt;
            &lt;in&gt;
                &lt;!-- using payloadFactory mediator to transform the request message --&gt;
                &lt;payloadFactory media-type="xml"&gt;
                    &lt;format&gt;
                        &lt;m:getQuote xmlns:m="http://services.samples"&gt;
                            &lt;m:request&gt;
                                &lt;m:symbol&gt;$1&lt;/m:symbol&gt;
                            &lt;/m:request&gt;
                        &lt;/m:getQuote&gt;
                    &lt;/format&gt;
                    &lt;args&gt;
                        &lt;arg xmlns:m0="http://services.samples" expression="//m0:Code"/&gt;
                    &lt;/args&gt;
                &lt;/payloadFactory&gt;
            &lt;/in&gt;
            &lt;out&gt;
                &lt;!-- using payloadFactory mediator to transform the response message --&gt;
                &lt;payloadFactory media-type="xml"&gt;
                    &lt;format&gt;
                        &lt;m:CheckPriceResponse xmlns:m="http://services.samples/xsd"&gt;
                            &lt;m:Code&gt;$1&lt;/m:Code&gt;
                            &lt;m:Price&gt;$2&lt;/m:Price&gt;
                        &lt;/m:CheckPriceResponse&gt;
                    &lt;/format&gt;
                    &lt;args&gt;
                        &lt;arg xmlns:m0="http://services.samples/xsd" expression="//m0:symbol"/&gt;
                        &lt;arg xmlns:m0="http://services.samples/xsd" expression="//m0:last"/&gt;
                    &lt;/args&gt;
                &lt;/payloadFactory&gt;
            &lt;/out&gt;
            &lt;send/&gt;
        &lt;/sequence&gt;
    &lt;/definitions&gt;</code></pre></p>
<h4 id="example-2-json">Example 2: JSON<a class="headerlink" href="#example-2-json" title="Permanent link">&para;</a></h4>
<p>This example sends a JSON message to the back end. For more information
on using JSON with the ESB profile , see <a href="https://docs.wso2.com/display/EI650/Working+with+JSON+Message+Payloads">Working with JSON Message
Payloads</a>
.</p>
<p>``` html/xml
    <payloadFactory media-type="json">
                <format>
                    {
        "coordinates": null,
        "created_at": "Fri Jun 24 17:43:26 +0000 2011",
        "truncated": false,
        "favorited": false,
        "id_str": "$1",
        "entities": {
            "urls": [</p>
<pre class="codehilite"><code class="linenums">        ],
        &quot;hashtags&quot;: [
            {
                &quot;text&quot;: &quot;$2&quot;,
                &quot;indices&quot;: [
                    35,
                    45
                ]
            }
        ],
        &quot;user_mentions&quot;: [

        ]
    },
    &quot;in_reply_to_user_id_str&quot;: null,
    &quot;contributors&quot;: null,
    &quot;text&quot;: &quot;$3&quot;,
    &quot;retweet_count&quot;: 0,
    &quot;id&quot;: &quot;##&quot;,
    &quot;in_reply_to_status_id_str&quot;: null,
    &quot;geo&quot;: null,
    &quot;retweeted&quot;: false,
    &quot;in_reply_to_user_id&quot;: null,

    &quot;source&quot;: &quot;&lt;a 
href=\&quot;http://sites.google.com/site/yorufukurou/\&quot; 
rel=\&quot;nofollow\&quot;&gt;YoruFukurou&lt;/a&gt;&quot;,
    &quot;in_reply_to_screen_name&quot;: null,
    &quot;user&quot;: {
        &quot;id_str&quot;: &quot;##&quot;,
        &quot;id&quot;: &quot;##&quot;
    },
    &quot;place&quot;: null,
    &quot;in_reply_to_status_id&quot;: null
}
            &lt;/format&gt;
            &lt;args&gt;
               &lt;arg expression=&quot;$.entities.hashtags[0].text&quot; evaluator=&quot;json&quot;/&gt;
               &lt;arg expression=&quot;//entities/hashtags/text&quot;/&gt;
               &lt;arg expression=&quot;//user/id&quot;/&gt;
               &lt;arg expression=&quot;//user/id_str&quot;/&gt;
               &lt;arg expression=&quot;$.user.id&quot; evaluator=&quot;json&quot;/&gt;
               &lt;arg expression=&quot;$.user.id_str&quot; evaluator=&quot;json&quot;/&gt;
            &lt;/args&gt;
&lt;/payloadFactory&gt;
&lt;property name=&quot;messageType&quot; value=&quot;application/json&quot; scope=&quot;axis2&quot;/&gt;</code></pre>


<p>```
</p>
<h5 id="note">Note<a class="headerlink" href="#note" title="Permanent link">&para;</a></h5>
<p>By default, JSON messages are converted to XML when they are received by
the PayloadFactor mediator. However, if you enable the JSON stream
formatter and builder, incoming JSON messages are left in JSON format,
which improves performance. To enable them, uncomment the following
lines in
<code class="codehilite">&lt;PRODUCT_HOME&gt;/repository/conf/axis2/axis2.xml</code> :

<code class="codehilite">html/xml
    &lt;!--messageFormatter contentType="application/json"
        class="org.apache.axis2.json.JSONStreamFormatter"/--&gt;

    &lt;!--messageBuilder contentType="application/json"
        class="org.apache.axis2.json.JSONStreamBuilder"/--&gt;</code></p>
<p>When the JSON stream formatter and builder are enabled, if you specify a
JSON expression in the PayloadFactory mediator, you must use the
<code class="codehilite">evaluator</code> attribute to specify that it is JSON. You
can also use the evaluator to specify that an XPath expression is XML,
or if you omit the evaluator attribute, XML is assumed by default. For
example:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>XML</td>
<td><p><code>              &lt;arg                             xmlns:m0=                            "                             http://sample                            " expression="//                             m0:symbol                            " evaluator=‚Äùxml‚Äù /&gt;             </code></p>
<p>or<br />
</p>
<p><code>              &lt;arg                             xmlns:m0=                            "                                             http://sample                                           " expression="//                             m0:symbol                            " /&gt;             </code></p></td>
</tr>
<tr class="even">
<td>JSON</td>
<td><code>             &lt;arg expression="$.user.id" evaluator="json" /&gt;            </code></td>
</tr>
</tbody>
</table>

<h4 id="example-3-adding-arguments">Example 3: Adding arguments<a class="headerlink" href="#example-3-adding-arguments" title="Permanent link">&para;</a></h4>
<p>In the following configuration, the values for format parameters
<code class="codehilite">code</code> and <code class="codehilite">price</code> will be assigned
with values that are evaluated from arguments given in the specified
order.</p>
<p>``` html/xml
    <payloadFactory media-type="xml">
        <format>
            <m:checkpriceresponse xmlns:m="http://services.samples/xsd">
            <m:code><span><span class="MathJax_Preview">1&lt;/m:code&gt;
            &lt;m:price&gt;</span><script type="math/tex">1</m:code>
            <m:price></script></span>2</m:price>
        </m:checkpriceresponse>
    </format>
    <args>
        <arg xmlns:m0="http://services.samples/xsd" expression="//m0:symbol"/>
        <arg xmlns:m0="http://services.samples/xsd" expression="//m0:last"/>
    </args>
    </payloadFactory>
<pre class="codehilite"><code class="linenums">
#### Example 4: Suppressing the namespace

To prevent the ESB profile from adding the default Synapse namespace in
an element in the payload format, use `         xmlns=""        ` as
shown in the following example.

``` java
    &lt;ser:getPersonByUmid xmlns:ser="http://service.directory.com&gt;
                   &lt;umid xmlns=""&gt;sagara&lt;/umid&gt;
    &lt;/ser:getPersonByUmid&gt;     </code></pre></p>
<h4 id="example-5-including-a-complete-soap-envelope-as-the-format">Example 5: Including a complete SOAP envelope as the format<a class="headerlink" href="#example-5-including-a-complete-soap-envelope-as-the-format" title="Permanent link">&para;</a></h4>
<p>In the following configuration, an entire SOAP envelope is added as the
format defined inline. This is useful when you want to generate the
result of the PayloadFactory mediator as a complete SOAP message with
SOAP headers.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;payloadFactory media-type="xml"&gt; 
    &lt;format&gt; 
    &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"&gt; 
    &lt;soapenv:Body&gt; 
    &lt;error&gt; 
    &lt;mes&gt;$1&lt;/mes&gt; 
    &lt;/error&gt; 
    &lt;/soapenv:Body&gt; 
    &lt;/soapenv:Envelope&gt; 
    &lt;/format&gt; 
    &lt;args&gt; 
    &lt;arg value=" Your request did not return any results. Please enter a valid EIN and try again"/&gt; 
    &lt;/args&gt; 
    &lt;/payloadFactory&gt;</code></pre>

<h4 id="example-6-uploading-a-file-to-an-http-endpoint-via-a-multipart-request">Example 6: Uploading a file to an HTTP endpoint via a multipart request<a class="headerlink" href="#example-6-uploading-a-file-to-an-http-endpoint-via-a-multipart-request" title="Permanent link">&para;</a></h4>
<p>The below example configuration uses VFS to upload the file in the
specified location to the given HTTP endpoint via a HTTP multipart
request.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;proxy xmlns="http://ws.apache.org/ns/synapse"
           name="smooksample"
           startOnLoad="true"
           statistics="disable"
           trace="disable"
           transports="vfs"&gt;
       &lt;target&gt;
          &lt;inSequence&gt;
             &lt;enrich&gt;
                &lt;source clone="true" type="body"/&gt;
                &lt;target property="originalBody" type="property"/&gt;
             &lt;/enrich&gt;
             &lt;property name="messageType"
                       scope="axis2"
                       type="STRING"
                       value="multipart/form-data"/&gt;
             &lt;payloadFactory media-type="xml"&gt;
                &lt;format&gt;
                   &lt;root xmlns=""&gt;
                      &lt;customFieldOne&gt;$1&lt;/customFieldOne&gt;
                      &lt;customFieldTwo&gt;$2&lt;/customFieldTwo&gt;
                      &lt;file xmlns="http://org.apache.axis2/xsd/form-data"
                            charset="US-ASCII"
                            content-type="text/plain"
                            filename="$3"
                            name="file1"&gt;$4&lt;/file&gt;
                   &lt;/root&gt;
                &lt;/format&gt;
                &lt;args&gt;
                   &lt;arg value="Some value 1"/&gt;
                   &lt;arg value="Some value 2"/&gt;
                   &lt;arg evaluator="xml" expression="$trp:FILE_NAME"/&gt;
                   &lt;arg evaluator="xml" expression="$ctx:originalBody"/&gt;
                &lt;/args&gt;
             &lt;/payloadFactory&gt;
             &lt;header name="Content-Type" scope="transport" value="multipart/form-data"/&gt;
             &lt;property name="messageType"
                       scope="axis2"
                       type="STRING"
                       value="multipart/form-data"/&gt;
             &lt;property name="OUT_ONLY" scope="default" type="STRING" value="true"/&gt;
                 &lt;send&gt;
                &lt;endpoint&gt;
                   &lt;address format="rest" uri="http://localhost:3000/upload/"/&gt;
                &lt;/endpoint&gt;
             &lt;/send&gt;
          &lt;/inSequence&gt;
       &lt;/target&gt;
       &lt;parameter name="transport.PollInterval"&gt;5&lt;/parameter&gt;
       &lt;parameter name="transport.vfs.FileURI"&gt;file:///&lt;YOUR_FILE_LOCATION&gt;&lt;/parameter&gt;
       &lt;parameter name="transport.vfs.ContentType"&gt;application/octet-stream&lt;/parameter&gt;
       &lt;parameter name="transport.vfs.ActionAfterProcess"&gt;DELETE&lt;/parameter&gt;
       &lt;parameter name="transport.vfs.FileNamePattern"&gt;.*\..*&lt;/parameter&gt;
       &lt;description/&gt;
    &lt;/proxy&gt;</code></pre>

<p>In the above example, the following property mediator configuration sets
the message type as <code class="codehilite">multipart/form-data</code> .</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;property name="messageType"
        scope="axis2"
        type="STRING"
        value="multipart/form-data"/&gt;</code></pre>

<p>The below <code class="codehilite">file</code> parameter of the payload factory
mediator defines the HTTP multipart request.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
</div>
<p>Do not change the
<code class="codehilite">http://org.apache.axis2/xsd/form-data</code>
namesapce.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;file xmlns="http://org.apache.axis2/xsd/form-data"
       charset="US-ASCII"
       content-type="text/plain"
       filename="$3"
       name="file1"&gt;$4&lt;/file&gt;</code></pre>

<p>Also, the below property mediator¬†configuration sets the content of the
uploaded file.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;header name="Content-Type" scope="transport" value="multipart/form-data"/&gt;
      &lt;property name="messageType"
          scope="axis2"
          type="STRING"
          value="multipart/form-data"/&gt;</code></pre>

<h4 id="example-7-adding-a-literal-argument">Example 7: Adding a literal argument<a class="headerlink" href="#example-7-adding-a-literal-argument" title="Permanent link">&para;</a></h4>
<p>The following example adds a literal argument to the Payload Factory
mediator, and sets it to true. This allows you to consider the type of
the argument value as String and to stop processing it.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;api xmlns="http://ws.apache.org/ns/synapse" name="payload" context="/payload"&gt;
       &lt;resource methods="POST"&gt;
          &lt;inSequence&gt;
             &lt;property name="getvalue" expression="json-eval($.hello)"/&gt;
             &lt;payloadFactory media-type="json"&gt;
                &lt;format&gt;{"newValue" : "$1"}&lt;/format&gt;
                &lt;args&gt;
                   &lt;arg evaluator="xml" literal="true" expression="get-property('getvalue')"/&gt;
                &lt;/args&gt;
             &lt;/payloadFactory&gt;
             &lt;respond/&gt;
          &lt;/inSequence&gt;
       &lt;/resource&gt;
    &lt;/api&gt;</code></pre>

<p>Following is a sample payload (i.e., <code class="codehilite">a.json</code> file),
which you can process using the above configuration.</p>
<p><strong>a.json</strong></p>
<pre class="codehilite"><code class="language-js linenums">    {"hello" : "&lt;pqr&gt;abc&lt;/pqr&gt;"}</code></pre>

<p>You can use the below sample cURL command to send the request to the
above configuration.</p>
<pre class="codehilite"><code class="language-js linenums">    curl -d @a.json http://localhost:8280/payload -H "Content-Type: application/json" -v</code></pre>

<p>You view the below output:</p>
<pre class="codehilite"><code class="language-js linenums">    {"newValue" : "{"pqr":"abc"}"}</code></pre>

<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>If you do not add the <code class="codehilite">literal="true"</code> within the
argument in the Payload Factory mediator of the above configuration, you
view the output as follows:</p>
<pre class="codehilite"><code class="linenums">{&quot;newValue&quot; : &quot;&lt;pqr&gt;abc&lt;/pqr&gt;&quot;}</code></pre>


<h4 id="example-8-adding-a-custom-soap-header">Example 8: Adding a custom SOAP header<a class="headerlink" href="#example-8-adding-a-custom-soap-header" title="Permanent link">&para;</a></h4>
<p>You can add custom SOAP headers to a request by using the¬†PayloadFactory
Mediator¬†in a proxy service as shown in the example below.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;definitions xmlns="http://ws.apache.org/ns/synapse"&gt;
    &lt;proxy name="StockQuoteProxy"
    transports="https http"
    startOnLoad="true"
    trace="disable"&gt;
    &lt;description/&gt;
    &lt;target&gt;
    &lt;endpoint&gt;
    &lt;address uri="http://localhost:9001/services/SimpleStockQuoteService"/&gt;
    &lt;/endpoint&gt;
    &lt;inSequence&gt;
    &lt;log level="full"/&gt;
    &lt;payloadFactory media-type="xml"&gt;
    &lt;format&gt;
    &lt;soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsd="http://services.samples/xsd"
    xmlns:ser="http://services.samples"&gt;
    &lt;soapenv:Header&gt;
    &lt;ser:authenticationRequest&gt;
    &lt;userName xmlns=""&gt;$1&lt;/userName&gt;
    &lt;password xmlns=""&gt;$2&lt;/password&gt;
    &lt;/ser:authenticationRequest&gt;
    &lt;/soapenv:Header&gt;
    &lt;soapenv:Body&gt;
    &lt;ser:getQuote&gt;
    &lt;ser:request&gt;
    &lt;xsd:symbol&gt;$3&lt;/xsd:symbol&gt;
    &lt;/ser:request&gt;
    &lt;/ser:getQuote&gt;
    &lt;/soapenv:Body&gt;
    &lt;/soapenv:Envelope&gt;
    &lt;/format&gt;
    &lt;args&gt;
    &lt;arg value="punnadi"/&gt;
    &lt;arg value="password"/&gt;
    &lt;arg value="hello"/&gt;
    &lt;/args&gt;
    &lt;/payloadFactory&gt;
    &lt;/inSequence&gt;
    &lt;outSequence&gt;
    &lt;send/&gt;
    &lt;/outSequence&gt;
    &lt;/target&gt;
    &lt;publishWSDL uri="file:repository/samples/resources/proxy/sample_proxy_1.wsdl"/&gt;
    &lt;/proxy&gt;
    &lt;sequence name="fault"&gt;
    &lt;log level="full"&gt;
    &lt;property name="MESSAGE" value="Executing default "fault" sequence"/&gt;
    &lt;property name="ERROR_CODE" expression="get-property('ERROR_CODE')"/&gt;
    &lt;property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/&gt;
    &lt;/log&gt;
    &lt;drop/&gt;
    &lt;/sequence&gt;
    &lt;sequence name="main"&gt;
    &lt;log/&gt;
    &lt;drop/&gt;
    &lt;/sequence&gt;
    &lt;/definitions&gt;</code></pre>

<h4 id="samples">Samples<a class="headerlink" href="#samples" title="Permanent link">&para;</a></h4>
<p>The following samples demonstrate the use of the PayloadFactory
mediator.</p>
<ul>
<li><a href="https://docs.wso2.com/pages/viewpage.action?pageId=85369102">Sample 17: Transforming / Replacing Message Content with
    PayloadFactory
    Mediator</a></li>
</ul>
                
                  
                
              
  <a href="#" class="cd-top text--replace js-cd-top">Top</a>

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            WSO2 Enterprise Integrator - Documentation
          </div>
        
        &copy;2019 <a href="https://wso2.com/">WSO2</a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../assets/js/theme.js"></script>
      
        <script src="../../assets/lib/backtotop/js/util.js"></script>
      
        <script src="../../assets/lib/backtotop/js/main.js"></script>
      
    
  </body>
</html>