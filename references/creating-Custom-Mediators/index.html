<!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for WSO2 Enterprise Integrator">
      
      
        <link rel="canonical" href="https://wso2.com/integration/references/creating-Custom-Mediators/">
      
      
        <meta name="author" content="WSO2">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Creating Custom Mediators - WSO2 Enterprise Integrator Documentation</title>
      
    
    
  
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
  <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">

    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/lib/highlightjs/default.min.css">
    
      <link rel="stylesheet" href="../../assets/css/theme.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#creating-custom-mediators" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<header class="md-header" data-md-component="header" id="page-header" data-url="" data-lang="en">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
               Enterprise Integrator Documentation
            </span>
            <span class="md-header-nav__topic">
              Creating Custom Mediators
            </span>
          
        </div>
        <div class="md-flex__ellipsis md-header__version-select">
            <div class="mb-tabs__dropdown version-select">
                <a class="md-tabs__link md-tabs__dropdown-link" href="#!" data-target="version-select-dropdown">7.0.0</a>
                <ul id="version-select-dropdown" class="mb-tabs__dropdown-content" tabindex="0">
                    <!-- Versions will added here dynamically -->
                    <li class="md-tabs__item mb-tabs__dropdown">
                        <a href="#" id="show-all-versions-link">Show all</a>
                    </li>
                </ul>
            </div>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item home_icon">
    
      <a href="../.." title="Home" class="md-tabs__link md-tabs__link--active">
          <i class="fa fa-home"></i>
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../overview/introduction/" title="Introduction" class="md-tabs__link">
          Introduction
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-tabs__link">
          Quick Start Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../concepts.md" title="Concepts" class="md-tabs__link">
          Concepts
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../setup/install_in_vm/" title="Setup and Install" class="md-tabs__link">
          Setup and Install
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../develop/design.md" title="Developer Experience" class="md-tabs__link">
          Developer Experience
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../samples/invoking_restful_service.md" title="Use Cases" class="md-tabs__link">
          Use Cases
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../admin/user_management.md" title="Administration and Observability" class="md-tabs__link">
          Administration and Observability
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../ei_config_catalog/" title="References" class="md-tabs__link">
          References
        </a>
      
    </li>
  

      
        
      
    </ul>
    <div class="quick_links">
        
        <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/creating-Custom-Mediators.md" target="blank" id="editIcon" title="Edit this page"
           title="Edit this page" class="md-icon md-content__icon nav_link edit_link"></a>
        
    </div>
    <a href="#" title="Report Issues" class="feedbackBtn" 
        onclick=window.open("https://github.com/"+"wso2/docs-ei"+"/issues/new?title=Doc%20Feedback:&body=Location%20:%20"+window.location.href); >
        Report Issues</a>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
    <label class="md-nav__title md-nav__title--site" for="__drawer">
      <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation"
         class="md-nav__button md-logo">
        
          <img src="../../images/logo.svg" width="48" height="48">
        
      </a>
      WSO2 Enterprise Integrator Documentation
    </label>
    
      <div class="md-nav__source">
        


  

<a href="https://github.com/wso2/docs-ei/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    wso2/docs-ei
  </div>
</a>
      </div>
    
    <ul class="md-nav__list" data-md-scrollfix>
      
        
        
        


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/introduction/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/about-this-release/" title="About this Release" class="md-nav__link">
      About this Release
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Quick Start Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Quick Start Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-nav__link">
      Quick Start Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts.md" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Setup and Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Setup and Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Installation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Installation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_vm/" title="Install in a VM" class="md-nav__link">
      Install in a VM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_docker/" title="Install in Docker" class="md-nav__link">
      Install in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_kubernetes/" title="Install in Kubernetes" class="md-nav__link">
      Install in Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Product Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Product Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deploying_wso2_ei/" title="Deploying WSO2 Enterprise Integrator" class="md-nav__link">
      Deploying WSO2 Enterprise Integrator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/upgrading/" title="Upgrading from a Previous Release" class="md-nav__link">
      Upgrading from a Previous Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/troubleshooting_deployment/" title="Troubleshooting Production Deployment" class="md-nav__link">
      Troubleshooting Production Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4" type="checkbox" id="nav-5-2-4">
    
    <label class="md-nav__link" for="nav-5-2-4">
      Supporting Configurations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-4">
        Supporting Configurations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/registry_mounting/" title="Optional: Mounting a Registry" class="md-nav__link">
      Optional: Mounting a Registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_lb/" title="Setting up a Load Balancer" class="md-nav__link">
      Setting up a Load Balancer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_synchronization/" title="Configuring Deployment Synchronization" class="md-nav__link">
      Configuring Deployment Synchronization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-4" type="checkbox" id="nav-5-2-4-4">
    
    <label class="md-nav__link" for="nav-5-2-4-4">
      Setting up Databases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-4">
        Setting up Databases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MySQL/" title="Setting up MySQL" class="md-nav__link">
      Setting up MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MSSQL/" title="Setting up MSSQL" class="md-nav__link">
      Setting up MSSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle/" title="Setting up Oracle" class="md-nav__link">
      Setting up Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle-RAC/" title="Setting up Oracle RAC" class="md-nav__link">
      Setting up Oracle RAC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-Informix/" title="Setting up IBM Informix" class="md-nav__link">
      Setting up IBM Informix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-DB2/" title="Setting up IBM DB2" class="md-nav__link">
      Setting up IBM DB2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MariaDB/" title="Setting up Maria DB" class="md-nav__link">
      Setting up Maria DB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Embedded-Derby/" title="Setting up Embedded Derby" class="md-nav__link">
      Setting up Embedded Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-Derby/" title="Setting up Remote Derby" class="md-nav__link">
      Setting up Remote Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-PostgreSQL/" title="Setting up PostgreSQL" class="md-nav__link">
      Setting up PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-H2/" title="Setting up Remote H2" class="md-nav__link">
      Setting up Remote H2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-5" type="checkbox" id="nav-5-2-4-5">
    
    <label class="md-nav__link" for="nav-5-2-4-5">
      Setting up a User Store
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-5">
        Setting up a User Store
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_jdbc_userstore/" title="Setting up a JDBC User Store" class="md-nav__link">
      Setting up a JDBC User Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_ro_ldap/" title="Setting up a Read-Only LDAP" class="md-nav__link">
      Setting up a Read-Only LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ldap/" title="Setting up a Read-Write LDAP" class="md-nav__link">
      Setting up a Read-Write LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ad/" title="Setting up a Read-Write Active Directory" class="md-nav__link">
      Setting up a Read-Write Active Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5" type="checkbox" id="nav-5-2-5">
    
    <label class="md-nav__link" for="nav-5-2-5">
      Security Hardening
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-5">
        Security Hardening
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5-1" type="checkbox" id="nav-5-2-5-1">
    
    <label class="md-nav__link" for="nav-5-2-5-1">
      Setting up Keystores
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-5-1">
        Setting up Keystores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/creating_keystores.md" title="Creating New Keystores" class="md-nav__link">
      Creating New Keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/importing_ssl_certificate.md" title="Adding SSL certificates to keystores" class="md-nav__link">
      Adding SSL certificates to keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/renewing_ca_signed_certificate_in_keystore.md" title="Renewing a CA-signed Certificate" class="md-nav__link">
      Renewing a CA-signed Certificate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/configuring_keystores.md" title="Configuring Keystores" class="md-nav__link">
      Configuring Keystores
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/single_key_encryption.md" title="Using Symmetric Encryption" class="md-nav__link">
      Using Symmetric Encryption
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/encrypting_plain_text.md" title="Encrypting Plain Text" class="md-nav__link">
      Encrypting Plain Text
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_csrf.md" title="Mitigating Cross Site Request Forgery Attacks" class="md-nav__link">
      Mitigating Cross Site Request Forgery Attacks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_css.md" title="Mitigating Cross Site Scripting" class="md-nav__link">
      Mitigating Cross Site Scripting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-6" type="checkbox" id="nav-5-2-6">
    
    <label class="md-nav__link" for="nav-5-2-6">
      Performance Tuning
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-6">
        Performance Tuning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/tuning_db_performance/" title="Tuning Database Performance" class="md-nav__link">
      Tuning Database Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/network_os_performance/" title="Tuning Network and OS Performance" class="md-nav__link">
      Tuning Network and OS Performance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/backup_recovery/" title="Backup and Recovery" class="md-nav__link">
      Backup and Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_checklist/" title="Product Deployment Checklist" class="md-nav__link">
      Product Deployment Checklist
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developer Experience
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developer Experience
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/design.md" title="Designing an Integration Use Case" class="md-nav__link">
      Designing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/testing.md" title="Testing an Integration Use Case" class="md-nav__link">
      Testing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/cicd.md" title="Continuous Development and Deployment" class="md-nav__link">
      Continuous Development and Deployment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Samples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../samples/invoking_restful_service.md" title="Invoking a RESTful Service" class="md-nav__link">
      Invoking a RESTful Service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/message_routing.md" title="Message Routing" class="md-nav__link">
      Message Routing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Administration and Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Administration and Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/user_management.md" title="User Management" class="md-nav__link">
      User Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      References
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ei_config_catalog/" title="Configuration Catalog" class="md-nav__link">
      Configuration Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      Mediator Catalog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        Mediator Catalog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mediator_catalog.md" title="Mediator Catlog" class="md-nav__link">
      Mediator Catlog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../working-with-Mediators-via-Tooling/" title="Working with Mediators via Tooling" class="md-nav__link">
      Working with Mediators via Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2-3" type="checkbox" id="nav-9-2-3">
    
    <label class="md-nav__link" for="nav-9-2-3">
      ESB Mediators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-9-2-3">
        ESB Mediators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="ESB Mediators" class="md-nav__link">
      ESB Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Aggregate Mediators" class="md-nav__link">
      Aggregate Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Bean Mediator" class="md-nav__link">
      Bean Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Builder Mediator" class="md-nav__link">
      Builder Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Cache Mediator" class="md-nav__link">
      Cache Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Mediator" class="md-nav__link">
      Call Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Template Mediator" class="md-nav__link">
      Call Template Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Callout Mediator" class="md-nav__link">
      Callout Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Class Mediator" class="md-nav__link">
      Class Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Conditional Router Mediator" class="md-nav__link">
      Conditional Router Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Data Mapper Mediator" class="md-nav__link">
      Data Mapper Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../property_catalog.md" title="Property Catalog" class="md-nav__link">
      Property Catalog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item">
    <a href="../../page-not-found.md" title="" class="md-nav__link">
      
    </a>
  </li>

      
    </ul>
  </nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
    
    
    
    
    
    <a href="#" title="On this page" class="nav_link md-icon md-content__icon toc_icon" id="tocToggleBtn">toc</a>
    <label class="md-nav__title" for="__toc">On this page</label>
    <ul class="md-nav__list" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#writing-an-esb-mediator" title="Writing an ESB Mediator" class="md-nav__link">
    Writing an ESB Mediator
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#building-the-mediator" title="Building the mediator" class="md-nav__link">
    Building the mediator
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-approach" title="Basic approach" class="md-nav__link">
    Basic approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-approach" title="Advanced approach" class="md-nav__link">
    Advanced approach
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#deploying-the-custom-mediator" title="Deploying the custom mediator" class="md-nav__link">
    Deploying the custom mediator
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensions-directory" title="Extensions directory" class="md-nav__link">
    Extensions directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dropins-directory" title="Dropins directory" class="md-nav__link">
    Dropins directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lib-directory" title="Lib directory" class="md-nav__link">
    Lib directory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        
        
        
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
                
                  <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/creating-Custom-Mediators.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="creating-custom-mediators">Creating Custom Mediators<a class="headerlink" href="#creating-custom-mediators" title="Permanent link">&para;</a></h1>
<p>The ESB profile of WSO2 EI comes with an assortment of
<a href="_ESB_Mediators_">mediators</a> to filter, transform, route and manipulate
messages. Mediators provide an easy way of extending the ESB.  When you
have a scenario that requires functionality not provided by the existing
mediators, you can write your own custom mediators to implement your
specific business requirements. Your custom mediators then must be
plugged into the ESB profile. After adding them to the ESB profile, they
function together with core mediators that come with the product. The
custom mediators can be distributed in a packaged form that can be
installed in another ESB profile instance.</p>
<ul>
<li><a href="#CreatingCustomMediators-WritinganESBMediator">Writing an ESB
    Mediator</a></li>
<li><a href="#CreatingCustomMediators-Buildingthemediator">Building the
    mediator</a></li>
<li><a href="#CreatingCustomMediators-Deployingthecustommediator">Deploying the custom
    mediator</a></li>
</ul>
<h3 id="writing-an-esb-mediator">Writing an ESB Mediator<a class="headerlink" href="#writing-an-esb-mediator" title="Permanent link">&para;</a></h3>
<p>There are two ways of writing an ESB mediator:</p>
<ul>
<li><strong>Using the</strong> <strong><a href="_Class_Mediator_">Class Mediator</a></strong> - This does not
    allow mediator specific XML configurations. See <a href="_Writing_Custom_Mediator_Implementations_">Writing Custom
    Mediator Implementations</a>
    for more information.</li>
<li><strong>Writing the mediator with factory and serialize methods</strong> - This
    allows mediator to have its own XML configuration. See <a href="_Writing_Custom_Configuration_Implementations_for_Mediators_">Writing
    Custom Configuration Implementations for
    Mediators</a>
    for more information.</li>
</ul>
<p>The easiest way to write a mediator is to extend your mediator class
from the
<a href="http://synapse.apache.org/apidocs/org/apache/synapse/mediators/AbstractMediator.html"><code class="codehilite">org.apache.synapse.mediators.AbstractMediator</code></a>
class. For example, you can see the following articles in the WSO2
library:</p>
<ul>
<li><a href="http://wso2.org/library/2898">Writing a Mediator in WSO2 EI - Part
    1</a></li>
<li><a href="http://wso2.org/library/2936">Writing a Mediator in WSO2 EI - Part
    2</a></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
</div>
<p>You can use the <a href="_Class_Mediator_">Class mediator</a> and <a href="_Creating_Custom_Mediators_">custom
mediators</a> for user-specific custom
developments when there is no built-in mediator that already provides
the required functionality. However, class and custom mediators incur a
high maintenance overhead. <a href="_Creating_Custom_Mediators_">Custom
mediators</a> in particular might introduce
version migration complications when upgrading WSO2 EI. Therefore, avoid
using them unless  the scenario is frequently re-used and heavily
user-specific. For best results, use <a href="_Debugging_Mediation_">WSO2 EI Tooling to
debug</a> Class and custom mediators.</p>
<h3 id="building-the-mediator">Building the mediator<a class="headerlink" href="#building-the-mediator" title="Permanent link">&para;</a></h3>
<p>After you write the mediator, you must build it and make it an OSGI
bundle so that it will work with the ESB.</p>
<h5 id="basic-approach">Basic approach<a class="headerlink" href="#basic-approach" title="Permanent link">&para;</a></h5>
<p>Create a regular JAR that links to the Synpase core JAR and place it in
the <code class="codehilite">&lt;EI_HOME&gt;/</code> <code class="codehilite">lib</code> directory. The
platform will automatically make it an OSGI bundle and deploy it to the
server.</p>
<h5 id="advanced-approach">Advanced approach<a class="headerlink" href="#advanced-approach" title="Permanent link">&para;</a></h5>
<p>If you want to control the way your mediator is created as an OSGI
bundle, you must write the POM files so that you can export and import
the packages you need, as shown in the examples below.</p>
<p>Following is a POM file that creates the mediator using <a href="_Class_Mediator_">Class
Mediator</a> .</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;

        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
        &lt;groupId&gt;org.test&lt;/groupId&gt;
        &lt;artifactId&gt;org.test&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;packaging&gt;bundle&lt;/packaging&gt;
        &lt;name&gt;My Samples - Test mediator&lt;/name&gt;
        &lt;url&gt;http://www.test.com&lt;/url&gt;

        &lt;repositories&gt;
            &lt;repository&gt;
                &lt;id&gt;wso2-maven2-repository&lt;/id&gt;
                &lt;url&gt;http://dist.wso2.org/maven2&lt;/url&gt;
            &lt;/repository&gt;
            &lt;repository&gt;
                &lt;id&gt;apache-Incubating-repo&lt;/id&gt;
                &lt;name&gt;Maven Incubating Repository&lt;/name&gt;
                &lt;url&gt;http://people.apache.org/repo/m2-incubating-repository&lt;/url&gt;
            &lt;/repository&gt;
            &lt;repository&gt;
                &lt;id&gt;apache-maven2-repo&lt;/id&gt;
                &lt;name&gt;Apache Maven2 Repository&lt;/name&gt;
                &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;
            &lt;/repository&gt;
        &lt;/repositories&gt;

        &lt;build&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                    &lt;version&gt;2.0&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;source&gt;1.5&lt;/source&gt;
                        &lt;target&gt;1.5&lt;/target&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
                    &lt;version&gt;1.4.0&lt;/version&gt;
                    &lt;extensions&gt;true&lt;/extensions&gt;
                    &lt;configuration&gt;
                        &lt;instructions&gt;
                            &lt;Bundle-SymbolicName&gt;org.test&lt;/Bundle-SymbolicName&gt;
                            &lt;Bundle-Name&gt;org.test&lt;/Bundle-Name&gt;
                            &lt;Export-Package&gt;
                                org.test.mediator.*,
                            &lt;/Export-Package&gt;
                            &lt;Import-Package&gt;
                                *; resolution:=optional
                            &lt;/Import-Package&gt;
                        &lt;/instructions&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/build&gt;

        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.synapse&lt;/groupId&gt;
                &lt;artifactId&gt;synapse-core&lt;/artifactId&gt;
                &lt;version&gt;2.1.1-wso2v5&lt;/version&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/project&gt;</code></pre>

<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>The Maven bundle plug-in was used for creating the OSGI bundle here.
Make sure you export the correct package that contains the mediator
code. Otherwise, your mediator will not work. If you are adding
third-party libraries to the class mediator, be sure to use the
maven-shade-plugin to add the dependencies. See the sample shade plugin
given below.</p>
<p><img alt="" src="images/icons/grey_arrow_down.png" />{.expand-control-image} Example
maven-shade-plugin</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;plugin&gt;
            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
            &lt;version&gt;&lt;/version&gt;
            &lt;executions&gt;
              &lt;execution&gt;
                &lt;phase&gt;package&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;shade&lt;/goal&gt;
                &lt;/goals&gt;
                &lt;configuration&gt;
                  &lt;artifactSet&gt;
                    &lt;includes&gt;
                      &lt;include&gt;&lt;/include&gt;
                      &lt;include&gt;&lt;/include&gt;
                    &lt;/includes&gt;
                  &lt;/artifactSet&gt;
                &lt;/configuration&gt;
              &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
              &lt;finalName&gt;&lt;/finalName&gt;
            &lt;/configuration&gt;
    &lt;/plugin&gt;</code></pre>

<p>Following is a POM file that creates the mediator with its own XML
configuration using the <code class="codehilite">Serialize</code> and
<code class="codehilite">Factory</code> classes.</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;

        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
        &lt;groupId&gt;org.test&lt;/groupId&gt;
        &lt;artifactId&gt;org.test&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;packaging&gt;bundle&lt;/packaging&gt;
        &lt;name&gt;My Samples - Test mediator&lt;/name&gt;
        &lt;url&gt;http://www.test.com&lt;/url&gt;

        &lt;repositories&gt;
            &lt;repository&gt;
                &lt;id&gt;wso2-maven2-repository&lt;/id&gt;
                &lt;url&gt;http://dist.wso2.org/maven2&lt;/url&gt;
            &lt;/repository&gt;
            &lt;repository&gt;
                &lt;id&gt;apache-Incubating-repo&lt;/id&gt;
                &lt;name&gt;Maven Incubating Repository&lt;/name&gt;
                &lt;url&gt;http://people.apache.org/repo/m2-incubating-repository&lt;/url&gt;
            &lt;/repository&gt;
            &lt;repository&gt;
                &lt;id&gt;apache-maven2-repo&lt;/id&gt;
                &lt;name&gt;Apache Maven2 Repository&lt;/name&gt;
                &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;
            &lt;/repository&gt;
        &lt;/repositories&gt;

        &lt;build&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                    &lt;version&gt;2.0&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;source&gt;1.5&lt;/source&gt;
                        &lt;target&gt;1.5&lt;/target&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
                    &lt;version&gt;1.4.0&lt;/version&gt;
                    &lt;extensions&gt;true&lt;/extensions&gt;
                    &lt;configuration&gt;
                        &lt;instructions&gt;
                            &lt;Bundle-SymbolicName&gt;org.test&lt;/Bundle-SymbolicName&gt;
                            &lt;Bundle-Name&gt;org.test&lt;/Bundle-Name&gt;
                            &lt;Export-Package&gt;
                                org.test.mediator.*,
                            &lt;/Export-Package&gt;
                            &lt;Import-Package&gt;
                                *; resolution:=optional
                            &lt;/Import-Package&gt;
                            &lt;Fragment-Host&gt;synapse-core&lt;/Fragment-Host&gt;
                        &lt;/instructions&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/build&gt;

        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.synapse&lt;/groupId&gt;
                &lt;artifactId&gt;synapse-core&lt;/artifactId&gt;
                &lt;version&gt;2.1.1-wso2v5&lt;/version&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/project&gt;</code></pre>

<p>In this case, it is necessary to make the mediator an OSGI fragment of
the synapse-core bundler. To achieve this, use the
<code class="codehilite">&lt;Fragment-Host&gt;synapse-core&lt;/Fragment-Host&gt;</code> .</p>
<p>Create
<code class="codehilite">&lt;PROJECT_HOME&gt;/main/resources/META-INF.services/org.apache.synapse.config.xml.MediatorFactory</code>
and
<code class="codehilite">&lt;PROJECT_HOME&gt;/main/resources/META-INF.services/org.apache.synapse.config.xml.MediatorSerializer</code>
files with the following content as shown below, to add service provider
definitions to your Maven project.</p>
<p><img alt="create the 2 text
files" src="attachments/4884105/52756984.png" title="create the 2 text files" /></p>
<p><strong>Content of the org.apache.synapse.config.xml.MediatorFactory file</strong></p>
<pre class="codehilite"><code class="language-text linenums">    org.wso2.carbon.mediator.cache.config.xml.CacheMediatorFactory </code></pre>

<p><strong>Content of the org.apache.synapse.config.xml.MediatorSerializer file</strong></p>
<pre class="codehilite"><code class="language-text linenums">    org.wso2.carbon.mediator.cache.config.xml.CacheMediatorSerializer  </code></pre>

<h3 id="deploying-the-custom-mediator">Deploying the custom mediator<a class="headerlink" href="#deploying-the-custom-mediator" title="Permanent link">&para;</a></h3>
<p>For the above example, after you create the mediator, place the JAR file
in the <code class="codehilite">&lt;EI_HOME&gt;\dropins</code> directory. However, there
are three places inside the WSO2 EI distribution for placing the JAR
file of a customer mediator. They are:</p>
<ul>
<li><code class="codehilite">&lt;EI_HOME&gt;\extensions</code></li>
<li><code class="codehilite">&lt;EI_HOME&gt;\dropins</code></li>
<li><code class="codehilite">&lt;EI_HOME&gt;\lib</code></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
</div>
<p>The recommended way is to copy the JAR files into the
<code class="codehilite">extensions</code> directory. If you deploy a mediator
through a Carbon Application (CAR file), it can only be accessed from
the Sequences and Proxy Services within the same CAR file. You need to
restart the server after copying the JAR file of the custom mediator
into any of these directories.</p>
<h4 id="extensions-directory"><code class="codehilite">Extensions</code> directory<a class="headerlink" href="#extensions-directory" title="Permanent link">&para;</a></h4>
<p>If you created a regular non-OSGI mediator, build it and copy the JAR
file into this directory. The system will convert the JAR file of the
mediator into an OSGI-JAR and deploy it into the server. This way is
easy and simple.</p>
<p>However, in this method, you cannot use any OSGI features within the
mediator implementation. For example, you cannot make certain packages
private or import specific versions of packages. Also, in this method,
other than Class mediators, you can use a mediator, which has its own
XML configuration.</p>
<h4 id="dropins-directory"><code class="codehilite">Dropins</code> directory<a class="headerlink" href="#dropins-directory" title="Permanent link">&para;</a></h4>
<p>If your custom mediator is a Class mediator, it would be a normal
bundle. Instead, if it is a mediator with an XML configuration, then it
should be a fragment of the Synapse core, and thereby, you need to
create an OSGI bundle for that. This requires basic knowledge about OSGI
and the Maven bundle plug-in. If you created your custom mediator as an
OSGI bundle, you can place its JAR file in the
<code class="codehilite">dropins</code> directory.</p>
<p>The benefit of creating the custom mediator as an OSGI bundle is
that you can use the OSGI features in its implementation as preferred.</p>
<h4 id="lib-directory"><code class="codehilite">Lib</code> directory<a class="headerlink" href="#lib-directory" title="Permanent link">&para;</a></h4>
<p>You can only copy JAR files of custom mediators, which are created using
Class mediators into this directory. If you copy a regular JAR file into
this directory, the system automatically converts it to an OSGI bundle.</p>
                
                  
                
              
  <a href="#" class="cd-top text--replace js-cd-top">Top</a>

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            WSO2 Enterprise Integrator - Documentation
          </div>
        
        &copy;2019 <a href="https://wso2.com/">WSO2</a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../assets/js/theme.js"></script>
      
        <script src="../../assets/lib/backtotop/js/util.js"></script>
      
        <script src="../../assets/lib/backtotop/js/main.js"></script>
      
    
  </body>
</html>