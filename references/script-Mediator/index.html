<!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for WSO2 Enterprise Integrator">
      
      
        <link rel="canonical" href="https://wso2.com/integration/references/script-Mediator/">
      
      
        <meta name="author" content="WSO2">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Script Mediator - WSO2 Enterprise Integrator Documentation</title>
      
    
    
  
      <link rel="stylesheet" href="../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
  <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">

    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/lib/highlightjs/default.min.css">
    
      <link rel="stylesheet" href="../../assets/css/theme.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#script-mediator" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
 * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<header class="md-header" data-md-component="header" id="page-header" data-url="" data-lang="en">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
               Enterprise Integrator Documentation
            </span>
            <span class="md-header-nav__topic">
              Script Mediator
            </span>
          
        </div>
        <div class="md-flex__ellipsis md-header__version-select">
            <div class="mb-tabs__dropdown version-select">
                <a class="md-tabs__link md-tabs__dropdown-link" href="#!" data-target="version-select-dropdown">5.8.0</a>
                <ul id="version-select-dropdown" class="mb-tabs__dropdown-content" tabindex="0">
                    <!-- Versions will added here dynamically -->
                    <li class="md-tabs__item mb-tabs__dropdown">
                        <a href="#" id="show-all-versions-link">Show all</a>
                    </li>
                </ul>
            </div>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item home_icon">
    
      <a href="../.." title="Home" class="md-tabs__link md-tabs__link--active">
          <i class="fa fa-home"></i>
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../overview/introduction/" title="Introduction" class="md-tabs__link">
          Introduction
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-tabs__link">
          Quick Start Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../concepts/concepts/" title="Concepts" class="md-tabs__link">
          Concepts
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../setup/install_in_vm/" title="Setup and Install" class="md-tabs__link">
          Setup and Install
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../develop/designing-an-integration-usecase/" title="Developer Experience" class="md-tabs__link">
          Developer Experience
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../use-cases/guides/" title="Use Cases" class="md-tabs__link">
          Use Cases
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../administer-and-observe/observability/" title="Administration and Observability" class="md-tabs__link">
          Administration and Observability
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../ei_config_catalog/" title="References" class="md-tabs__link">
          References
        </a>
      
    </li>
  

      
        
      
    </ul>
    <div class="quick_links">
        
        <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/script-Mediator.md" target="blank" id="editIcon" title="Edit this page"
           title="Edit this page" class="md-icon md-content__icon nav_link edit_link"></a>
        
    </div>
    <a href="#" title="Report Issues" class="feedbackBtn" 
        onclick=window.open("https://github.com/"+"wso2/docs-ei"+"/issues/new?title=Doc%20Feedback:&body=Location%20:%20"+window.location.href); >
        Report Issues</a>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
    <label class="md-nav__title md-nav__title--site" for="__drawer">
      <a href="https://wso2.com/integration/" title="WSO2 Enterprise Integrator Documentation"
         class="md-nav__button md-logo">
        
          <img src="../../images/logo.svg" width="48" height="48">
        
      </a>
      WSO2 Enterprise Integrator Documentation
    </label>
    
      <div class="md-nav__source">
        


  

<a href="https://github.com/wso2/docs-ei/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    wso2/docs-ei
  </div>
</a>
      </div>
    
    <ul class="md-nav__list" data-md-scrollfix>
      
        
        
        


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/introduction/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/about-this-release/" title="About this Release" class="md-nav__link">
      About this Release
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Quick Start Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Quick Start Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quick-start-guide/quick-start-guide/" title="Quick Start Guide" class="md-nav__link">
      Quick Start Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Setup and Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Setup and Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Installation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Installation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_vm/" title="Install in a VM" class="md-nav__link">
      Install in a VM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_docker/" title="Install in Docker" class="md-nav__link">
      Install in Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install_in_kubernetes/" title="Install in Kubernetes" class="md-nav__link">
      Install in Kubernetes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Product Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Product Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deploying_wso2_ei/" title="Deploying WSO2 Enterprise Integrator" class="md-nav__link">
      Deploying WSO2 Enterprise Integrator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/upgrading/" title="Upgrading from a Previous Release" class="md-nav__link">
      Upgrading from a Previous Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/troubleshooting_deployment/" title="Troubleshooting Production Deployment" class="md-nav__link">
      Troubleshooting Production Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4" type="checkbox" id="nav-5-2-4">
    
    <label class="md-nav__link" for="nav-5-2-4">
      Supporting Configurations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-4">
        Supporting Configurations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/registry_mounting/" title="Optional: Mounting a Registry" class="md-nav__link">
      Optional: Mounting a Registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_lb/" title="Setting up a Load Balancer" class="md-nav__link">
      Setting up a Load Balancer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_synchronization/" title="Configuring Deployment Synchronization" class="md-nav__link">
      Configuring Deployment Synchronization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-4" type="checkbox" id="nav-5-2-4-4">
    
    <label class="md-nav__link" for="nav-5-2-4-4">
      Setting up Databases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-4">
        Setting up Databases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MySQL/" title="Setting up MySQL" class="md-nav__link">
      Setting up MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MSSQL/" title="Setting up MSSQL" class="md-nav__link">
      Setting up MSSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle/" title="Setting up Oracle" class="md-nav__link">
      Setting up Oracle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Oracle-RAC/" title="Setting up Oracle RAC" class="md-nav__link">
      Setting up Oracle RAC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-Informix/" title="Setting up IBM Informix" class="md-nav__link">
      Setting up IBM Informix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-IBM-DB2/" title="Setting up IBM DB2" class="md-nav__link">
      Setting up IBM DB2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-MariaDB/" title="Setting up Maria DB" class="md-nav__link">
      Setting up Maria DB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Embedded-Derby/" title="Setting up Embedded Derby" class="md-nav__link">
      Setting up Embedded Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-Derby/" title="Setting up Remote Derby" class="md-nav__link">
      Setting up Remote Derby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-PostgreSQL/" title="Setting up PostgreSQL" class="md-nav__link">
      Setting up PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/db/setting-up-Remote-H2/" title="Setting up Remote H2" class="md-nav__link">
      Setting up Remote H2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-4-5" type="checkbox" id="nav-5-2-4-5">
    
    <label class="md-nav__link" for="nav-5-2-4-5">
      Setting up a User Store
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-4-5">
        Setting up a User Store
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_jdbc_userstore/" title="Setting up a JDBC User Store" class="md-nav__link">
      Setting up a JDBC User Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_ro_ldap/" title="Setting up a Read-Only LDAP" class="md-nav__link">
      Setting up a Read-Only LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ldap/" title="Setting up a Read-Write LDAP" class="md-nav__link">
      Setting up a Read-Write LDAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/setting_up_rw_ad/" title="Setting up a Read-Write Active Directory" class="md-nav__link">
      Setting up a Read-Write Active Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5" type="checkbox" id="nav-5-2-5">
    
    <label class="md-nav__link" for="nav-5-2-5">
      Security Hardening
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-5">
        Security Hardening
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-5-1" type="checkbox" id="nav-5-2-5-1">
    
    <label class="md-nav__link" for="nav-5-2-5-1">
      Setting up Keystores
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-2-5-1">
        Setting up Keystores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/creating_keystores/" title="Creating New Keystores" class="md-nav__link">
      Creating New Keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/importing_ssl_certificate/" title="Adding SSL certificates to keystores" class="md-nav__link">
      Adding SSL certificates to keystores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/renewing_ca_signed_certificate_in_keystore/" title="Renewing a CA-signed Certificate" class="md-nav__link">
      Renewing a CA-signed Certificate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/configuring_keystores/" title="Configuring Keystores" class="md-nav__link">
      Configuring Keystores
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/single_key_encryption/" title="Using Symmetric Encryption" class="md-nav__link">
      Using Symmetric Encryption
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/encrypting_plain_text/" title="Encrypting Plain Text" class="md-nav__link">
      Encrypting Plain Text
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_csrf/" title="Mitigating Cross Site Request Forgery Attacks" class="md-nav__link">
      Mitigating Cross Site Request Forgery Attacks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/security/mitigating_css/" title="Mitigating Cross Site Scripting" class="md-nav__link">
      Mitigating Cross Site Scripting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-6" type="checkbox" id="nav-5-2-6">
    
    <label class="md-nav__link" for="nav-5-2-6">
      Performance Tuning
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-6">
        Performance Tuning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/tuning_jvm_performance/" title="Tuning JVM Performance" class="md-nav__link">
      Tuning JVM Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/network_os_performance/" title="Tuning Network and OS Performance" class="md-nav__link">
      Tuning Network and OS Performance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/backup_recovery/" title="Backup and Recovery" class="md-nav__link">
      Backup and Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/deployment_checklist/" title="Product Deployment Checklist" class="md-nav__link">
      Product Deployment Checklist
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developer Experience
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developer Experience
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/designing-an-integration-usecase/" title="Designing an Integration Use Case" class="md-nav__link">
      Designing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/testing/" title="Testing an Integration Use Case" class="md-nav__link">
      Testing an Integration Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/cicd/" title="Continuous Development and Deployment" class="md-nav__link">
      Continuous Development and Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/wSO2-Integration-Studio/" title="WSO2 Integration Studio" class="md-nav__link">
      WSO2 Integration Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop/working-with-WSO2-Integration-Studio/" title="Working with Integration Studio" class="md-nav__link">
      Working with Integration Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Samples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../use-cases/guides/" title="Invoking a RESTful Service" class="md-nav__link">
      Invoking a RESTful Service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/message_routing.md" title="Message Routing" class="md-nav__link">
      Message Routing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Administration and Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Administration and Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../administer-and-observe/observability/" title="Observability" class="md-nav__link">
      Observability
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      References
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ei_config_catalog/" title="Configuration Catalog" class="md-nav__link">
      Configuration Catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      Mediator Catalog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        Mediator Catalog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mediator_catalog.md" title="Mediator Catlog" class="md-nav__link">
      Mediator Catlog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../working-with-Mediators-via-Tooling/" title="Working with Mediators via Tooling" class="md-nav__link">
      Working with Mediators via Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2-3" type="checkbox" id="nav-9-2-3">
    
    <label class="md-nav__link" for="nav-9-2-3">
      ESB Mediators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-9-2-3">
        ESB Mediators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="ESB Mediators" class="md-nav__link">
      ESB Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Aggregate Mediators" class="md-nav__link">
      Aggregate Mediators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Bean Mediator" class="md-nav__link">
      Bean Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Builder Mediator" class="md-nav__link">
      Builder Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Cache Mediator" class="md-nav__link">
      Cache Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Mediator" class="md-nav__link">
      Call Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Call Template Mediator" class="md-nav__link">
      Call Template Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Callout Mediator" class="md-nav__link">
      Callout Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Class Mediator" class="md-nav__link">
      Class Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Conditional Router Mediator" class="md-nav__link">
      Conditional Router Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Data Mapper Mediator" class="md-nav__link">
      Data Mapper Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eSB-Mediators/" title="Clone Mediator" class="md-nav__link">
      Clone Mediator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../property_catalog.md" title="Property Catalog" class="md-nav__link">
      Property Catalog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

      
        
        
        


  <li class="md-nav__item">
    <a href="../../page-not-found.md" title="" class="md-nav__link">
      
    </a>
  </li>

      
    </ul>
  </nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
    
    
    
    
    
    <a href="#" title="On this page" class="nav_link md-icon md-content__icon toc_icon" id="tocToggleBtn">toc</a>
    <label class="md-nav__title" for="__toc">On this page</label>
    <ul class="md-nav__list" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#syntax" title="Syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-using-an-inline-script" title="Example 1 - Using an inline script" class="md-nav__link">
    Example 1 - Using an inline script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-using-a-script-saved-in-the-registry" title="Example 2 - Using a script saved in the registry" class="md-nav__link">
    Example 2 - Using a script saved in the registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-adding-an-include-key" title="Example 3 - Adding an Include key" class="md-nav__link">
    Example 3 - Adding an Include key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-adding-a-custom-soap-header" title="Example 4 - Adding a custom SOAP header" class="md-nav__link">
    Example 4 - Adding a custom SOAP header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-per-method" title="Example per method" class="md-nav__link">
    Example per method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samples" title="Samples" class="md-nav__link">
    Samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        
        
        
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
                
                  <a href="https://github.com/wso2/docs-ei/edit/master/en/docs/references/script-Mediator.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="script-mediator">Script Mediator<a class="headerlink" href="#script-mediator" title="Permanent link">&para;</a></h1>
<p>The <strong>Script Mediator</strong> is used to invoke the functions of a variety
of scripting languages such as JavaScript, Groovy, or Ruby.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>The ESB profile of WSO2 EI uses Rhino engine to execute JavaScripts.
Rhino engine converts the script to a method inside a Java class.
Therefore, when processing large JSON data volumes, the code length must
be less than 65536 characters, since the Script mediator converts the
payload into a Java object. However, you can use the following
alternative options to process large JSON data volumes.</p>
<ul>
<li>Achieve the same functionality via a <a href="_Class_Mediator_">Class
    mediator</a> .</li>
<li>If the original message consists of repetitive sections, you can use
    the <a href="_Iterate_Mediator_">Iterate mediator</a> to generate a relatively
    small payload using those repetitive sections. This will then allow
    you to use the Script mediator.</li>
<li>From WSO2 EI 6.2.0 onwards, the Script Mediator supports using
    Nashorn to execute JavaScripts, in addition to its default Rhino
    engine. For more information, see <a href="_Script_Mediator_with_Nashorn_Support_">Script Mediator with Nashorn
    Support</a> .</li>
</ul>
<p>A Script mediator can be created in one of the following methods.</p>
<ul>
<li>With the script program statements stored in a separate file,
    referenced via the <a href="https://docs.wso2.com/display/EI650/Working+with+Local+Registry+Entries">Local or Remote Registry
    entry</a>
    .</li>
<li>With the script program statements embedded inline within the
    Synapse configuration.</li>
</ul>
<p>Synapse uses the Apache <a href="http://jakarta.apache.org/bsf/">Bean Scripting
Framework</a> for scripting language
support. Any script language supported by BSF may be used to implement
the Synapse Mediator. With the Script Mediator, you can invoke a
function in the corresponding script. With these functions, it is
possible to access the Synapse predefined in a script variable named
<code class="codehilite">mc</code> . The <code class="codehilite">mc</code> variable represents an
implementation of the <code class="codehilite">MessageContext</code> , named
<code class="codehilite">ScriptMessageContext.java</code> , which contains the
following methods that can be accessed within the script as
<code class="codehilite">mc.methodName</code> .</p>
<table>
<thead>
<tr>
<th>Return?</th>
<th>Method Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Yes</td>
<td>getPayloadXML()</td>
<td>This gets an XML representation of SOAP Body payload.</td>
</tr>
<tr>
<td>No</td>
<td>setPayloadXML(payload)</td>
<td>This sets the SOAP body payload from XML.</td>
</tr>
<tr>
<td>No</td>
<td>addHeader(mustUnderstand, content)</td>
<td>This adds a new SOAP header to the message.</td>
</tr>
<tr>
<td>Yes</td>
<td>getEnvelopeXML()</td>
<td>This gets the XML representation of the complete SOAP envelope.</td>
</tr>
<tr>
<td>No</td>
<td>setTo(reference)</td>
<td>This is used to set the value which specifies the receiver of the message.</td>
</tr>
<tr>
<td>Yes</td>
<td>setFaultTo(reference)</td>
<td>This is used to set the value which specifies the receiver of the faults relating to the message.</td>
</tr>
<tr>
<td>No</td>
<td>setFrom(reference)</td>
<td>This is used to set the value which specifies the sender of the message.</td>
</tr>
<tr>
<td>No</td>
<td>setReplyTo(reference)</td>
<td>This is used to set the value which specifies the receiver of the replies to the message.</td>
</tr>
<tr>
<td>Yes</td>
<td>getPayloadJSON()</td>
<td>This gets the JSON representation of a SOAP Body payload.</td>
</tr>
<tr>
<td>No</td>
<td>setPayloadJSON( payload )</td>
<td>This sets the JSON representation of a payload obtained via the <code class="codehilite">getPayloadJSON()</code> method and sets it in the current message context.</td>
</tr>
<tr>
<td>Yes</td>
<td>getProperty(name)</td>
<td>This gets a property from the current message context.</td>
</tr>
<tr>
<td>No</td>
<td>setProperty(key, value)</td>
<td>This is used to set a property in the current message context. The previously set property values are replaced by this method.</td>
</tr>
</tbody>
</table>
<p>Implementing a Mediator with a script language has advantages over using
the built-in Synapse Mediator types or implementing a custom Java class
Mediator. The Script Mediators have the flexibility of a class Mediator
with access to the Synapse <code class="codehilite">MessageContext</code> and
<code class="codehilite">SynapseEnvironment</code> APIs. Also, the ease of use and
dynamic nature of scripting languages allow the rapid development and
prototyping of custom mediators. An additional benefit of some scripting
languages is that they have very simple and elegant XML manipulation
capabilities, which make them very usable in a Synapse mediation
environment. e.g., JavaScript E4X or Ruby REXML.</p>
<p>For both types of script mediator definitions, the
<code class="codehilite">MessageContext</code> passed into the script has additional
methods over the standard Synapse <code class="codehilite">MessageContext</code> to
enable working with XML natural to the scripting language. Example are
when using JavaScript <code class="codehilite">getPayloadXML</code> and
<code class="codehilite">setPayloadXML</code> , <code class="codehilite">E4X</code> XML objects
and when using Ruby, REXML documents.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>The Script mediator is a
<a href="ESB-Mediators_119131045.html#ESBMediators-Content-awareness">content-aware</a>
mediator.</p>
<hr />
<p><a href="#ScriptMediator-Prerequisites">Prerequisites</a> |
<a href="#ScriptMediator-Syntax">Syntax</a> |
<a href="#ScriptMediator-creating_scriptConfiguration">Configuration</a> |
<a href="#ScriptMediator-Examples">Examples</a></p>
<hr />
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>Listed below are the prerequisites for writing a Script mediator using
JavaScript, Groovy, or Ruby.</p>
<table>
<thead>
<tr class="header">
<th>Scripting Language</th>
<th>Prerequisite</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Groovy</td>
<td>Download the groovy-all <code>             -2.4.4.jar            </code> file and copy it to the <code>                           &lt;EI_HOME&gt;/             </code> dropins directory. Note that <a href="#ScriptMediator-creating_script">when you define the script</a> , you need to start by importing Groovy.</td>
</tr>
<tr class="even">
<td>Ruby</td>
<td><p>Install the JRuby engine for mediation. This is available in the WSO2 P2 repository as a feature ( <strong>WSO2 Carbon - JRuby Engine for Mediation</strong> ). See the instructions on <a href="https://docs.wso2.com/display/EI650/Product+Administration#ProductAdministration-managing_features">how to install features in WSO2 EI</a> .</p>
<p>Alternatively, you can download and install the JRuby engine manually: Download the <code>              jruby-complete-1.3.0.wso2v1.jar             </code> file from the WSO2 P2 repository and copy it to the <code>                             &lt;EI_HOME&gt;/              </code> dropins directory.</p></td>
</tr>
<tr class="odd">
<td>JavaScript</td>
<td>The JavaScript/E4X support is enabled by default in the WSO2 Enterprise Integrator distribution and ready for use.</td>
</tr>
</tbody>
</table>

<h3 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h3>
<p>Click on the relevant tab to view the syntax for a script mediator using
an Inline script, or a script mediator using a script of a registry</p>
<ul>
<li><a href="#2969856bfcaa4a8f9327808aa3d8ecd7"><strong>Using an Inline script</strong></a></li>
<li><a href="#b366531663a44eb4a1e580a1258dc450"><strong>Using a script of the
    registry</strong></a></li>
</ul>
<p>The following syntax applies when you create a Script mediator with the
script program statements embedded inline within the Synapse
configuration.</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;script language="js"&gt;&lt;![CDATA[...script source code...]]&gt;&lt;/script&gt;</code></pre>

<p>The following syntax applies when you create a Script mediator with the
script program statements stored in a separate file, referenced via the
<a href="https://docs.wso2.com/display/EI650/Working+with+Registry+Artifacts">Local or Remote Registry
entry</a>
.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>If you are creating the Registry Resource via Tooling, y ou need not
specify the content/media type, because it gets automatically applied
when you select the <strong>JavaScript File Template</strong> as shown below.</p>
<p><img alt="select the JavaScript File
Template" src="attachments/119131139/119131140.png" title="select the JavaScript File Template" /></p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;script key="string" language="js" [function="script-function-name"]&gt;
        &lt;include key="string"/&gt;
    &lt;/script&gt;</code></pre>

<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<p>Click on the relevant tab to view the required UI configuration
depending on the script type you have selected. The available script
types are as follows:</p>
<ul>
<li><strong>Inline</strong> : If this script type is selected, the script is
    specified inline.</li>
<li>
<p><strong>Registry</strong> : If this script type is selected, a script which is
    already saved in the registry will be referred using a key.</p>
</li>
<li>
<p><a href="#2551d901faaa4d57aa0f7fa1e9db0ce7"><strong>Inline</strong></a></p>
</li>
<li><a href="#9cabc8b04ec04ee591f30099278ed4c0"><strong>Using a script of the
    registry</strong></a></li>
</ul>
<p>The parameters available to configure a Script mediator using an inline
script are as follows.</p>
<table>
<thead>
<tr class="header">
<th>Parameter Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Language</strong></td>
<td><p>The scripting language for the Script mediator. You can select from the following available languages.</p>
<ul>
<li>JavaScript - This is represented as <code>                  js                 </code> in the source view.</li>
<li>Groovy - This is represented as <code>                  groovy                 </code> in the source view.</li>
<li>Ruby - This is represented as <code>                  rb                 </code> in the source view.</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Source</strong></td>
<td><div class="content-wrapper">
<p>Enter the source in this parameter.</p>
<p><strong>Note:</strong> If you are using Groovy as the scripting language, you need to first import Groovy in your script by adding the following:</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb1" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: java; gutter: false; theme: Confluence"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">import</span><span class="im"> groovy.json.*;</span></span></code></pre></div>
</div>
</div>
</div></td>
</tr>
</tbody>
</table>

<p>The parameters available to configure a Script mediator using a script
saved in the registry are as follows.</p>
<table>
<thead>
<tr class="header">
<th>Parameter Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Language</strong></td>
<td><div class="content-wrapper">
<p>The scripting language for the Script mediator. You can select from the following available languages.</p>
<ul>
<li>JavaScript - This is represented as <code>                   js                  </code> in the source view.</li>
<li><p>Groovy - This is represented as <code>                    groovy                   </code> in the source view. <strong>Note:</strong> Be sure that your script starts with the following, which indicates that Groovy is imported:</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb1" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: java; gutter: false; theme: Confluence"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">import</span><span class="im"> groovy.json.*;</span></span></code></pre></div>
</div>
</div></li>
<li>Ruby - This is represented as <code>                   rb                  </code> in the source view.</li>
</ul>
</div></td>
</tr>
<tr class="even">
<td><strong>Function</strong></td>
<td>The function of the selected script language to be invoked. This is an optional parameter. If no value is specified, a default function named <code>                mediate               </code> will be applied. This function considers the Synapse MessageContext as a single parameter. The function may return a boolean. If it does not, then the value <code>                true               </code> is assumed and the Script mediator returns this value.</td>
</tr>
<tr class="odd">
<td><strong>Key Type</strong></td>
<td><p>You can select one of the following options.</p>
<ul>
<li><strong>Static Key</strong> : If this is selected, an existing key can be selected from the registry for the <strong>Key</strong> parameter.</li>
<li><strong>Dynamic Key</strong> : If this is selected, the key can be entered dynamically in the <strong>Key</strong> parameter.</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Key</strong></td>
<td>The Registry location of the source. You can click either <strong>Configuration Registry</strong> or the <strong>Governance Registry</strong> to select the source from the resource tree.</td>
</tr>
<tr class="odd">
<td><strong>Include keys</strong></td>
<td><div class="content-wrapper">
<p>This parameter allows you to include functions defined in two or more scripts your Script mediator configuration. After pointing to one script in the <strong>Key</strong> parameter, you can click <strong>Add Include</strong> <strong>Key</strong> to add the function in another script.</p>
<p>When you click <strong>Add Include</strong> <strong>Key</strong> , the following parameters will be displayed. Enter the script to be included in the <strong>Key</strong> parameter by clicking either <strong>Configuration Registry</strong> or the <strong>Governance Registry</strong> <strong></strong> and then selecting the relevant script from the resource tree.</p>
</div></td>
</tr>
</tbody>
</table>

<hr />
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="#ScriptMediator-Example1-Usinganinlinescript">Example 1 - Using an inline
    script</a></li>
<li><a href="#ScriptMediator-Example2-Usingascriptsavedintheregistry">Example 2 - Using a script saved in the
    registry</a></li>
<li><a href="#ScriptMediator-Example3-AddinganIncludekey">Example 3 - Adding an Include
    key</a></li>
<li><a href="#ScriptMediator-Example4-AddingacustomSOAPheader">Example 4 - Adding a custom SOAP
    header</a></li>
<li><a href="#ScriptMediator-Examplepermethod">Example per method</a></li>
<li><a href="#ScriptMediator-Samples">Samples</a></li>
</ul>
<h4 id="example-1-using-an-inline-script">Example 1 - Using an inline script<a class="headerlink" href="#example-1-using-an-inline-script" title="Permanent link">&para;</a></h4>
<p>The following configuration is an example of an inline mediator using
<code class="codehilite">JavaScript/E4X</code> which returns false if the SOAP
message body contains an element named <code class="codehilite">symbol</code> , which
has a value of <code class="codehilite">IBM</code> .</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;script language="js"&gt;&lt;![CDATA[mc.getPayloadXML()..symbol != "IBM";]]&gt;&lt;/script&gt;</code></pre>

<h4 id="example-2-using-a-script-saved-in-the-registry">Example 2 - Using a script saved in the registry<a class="headerlink" href="#example-2-using-a-script-saved-in-the-registry" title="Permanent link">&para;</a></h4>
<p>In the following example, script is loaded from the registry by using
the key
<code class="codehilite">repository/conf/sample/resources/script/test.js</code> .</p>
<pre class="codehilite"><code class="language-java linenums">    &lt;script language="js"
        key="repository/conf/sample/resources/script/test.js"
        function="testFunction"/&gt;</code></pre>

<p><code class="codehilite">script language="js"</code> indicates that the function
invoked should be in the JavaScript language. The function named
testFunction which is invoked should be saved as a resource in the
<a href="https://docs.wso2.com/display/EI650/Product+Administration#ProductAdministration-Configuringtheregistry">Registry</a>
. The script can be as shown in the example below.</p>
<pre class="codehilite"><code class="language-java linenums">    function testFunction(mc) {
         var symbol = mc.getPayloadXML()..*::Code.toString();
         mc.setPayloadXML(
            &lt;m:getQuote xmlns:m="http://services.samples/xsd"&gt;
               &lt;m:request&gt;
                  &lt;m:symbol&gt;{symbol}&lt;/m:symbol&gt;
               &lt;/m:request&gt;
            &lt;/m:getQuote&gt;);
    }</code></pre>

<h4 id="example-3-adding-an-include-key">Example 3 - Adding an Include key<a class="headerlink" href="#example-3-adding-an-include-key" title="Permanent link">&para;</a></h4>
<p>The following configuration has an <code class="codehilite">include key</code> .</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;script language="js" key="stockquoteScript" function="transformRequest"&gt;
        &lt;include key="sampleScript"/&gt;
    &lt;/script&gt;</code></pre>

<p>The script is written in JavaScript. The function to be executed is
<code class="codehilite">transformRequest</code> . This function may be as follows in
a script saved in the
<a href="https://docs.wso2.com/display/EI650/Product+Administration#ProductAdministration-Configuringtheregistry">Registry</a>
.</p>
<pre class="codehilite"><code class="language-js linenums">    // stockquoteTransform.js
    function transformRequest(mc) {
    transformRequestFunction(mc);
    }

    function transformResponse(mc) {
    transformResponseFunction(mc);
    }</code></pre>

<p>In addition, the function in the script named
<code class="codehilite">sampleScript</code> which is included in the mediation
configuration via the <code class="codehilite">include key</code> sub element is also
executed in the mediation. Note that in order to do this,
<code class="codehilite">sampleScript</code> script should also be saved as a
resource in the Registry . This script can be as follows.</p>
<pre class="codehilite"><code class="language-js linenums">    // sample.js
    function transformRequestFunction(mc) {
    var symbol = mc.getPayloadXML()..*::Code.toString();
    mc.setPayloadXML(
        &lt;m:getquote m="http://services.samples"&gt;
            &lt;m:request&gt;
                &lt;m:symbol&gt;{symbol}&lt;/m:symbol&gt;
            &lt;/m:request&gt;
        &lt;/m:getquote&gt;);
    }

    function transformResponse(mc) {
    var symbol = mc.getPayloadXML()..*::symbol.toString();
    var price = mc.getPayloadXML()..*::last.toString();
    mc.setPayloadXML(
        &lt;m:checkpriceresponse m="http://services.samples/xsd"&gt;
            &lt;m:code&gt;{symbol}&lt;/m:code&gt;
            &lt;m:price&gt;{price}&lt;/m:price&gt;
        &lt;/m:checkpriceresponse&gt;);
    }</code></pre>

<h4 id="example-4-adding-a-custom-soap-header">Example 4 - Adding a custom SOAP header<a class="headerlink" href="#example-4-adding-a-custom-soap-header" title="Permanent link">&para;</a></h4>
<p>You can add custom SOAP headers to a request by using the
<code class="codehilite">addHeader(mustUnderstand, content)</code> of the Script
Mediator in a proxy service as shown in the example below.</p>
<pre class="codehilite"><code class="language-xml linenums">    &lt;proxy xmlns="http://ws.apache.org/ns/synapse"
           name="CustomSOAPHeaderProxy"
           startOnLoad="true"
           statistics="disable"
           trace="disable"
           transports="http,https"&gt;
       &lt;target&gt;
          &lt;inSequence&gt;
             &lt;log level="full"&gt;
                &lt;property name="Message" value="IncomingRequest"/&gt;
             &lt;/log&gt;
             &lt;script language="js"&gt;mc.addHeader(false, &amp;lt;ns:sampleCustomHeader xmlns:ns="gsb:http://wso2.org/sample"&amp;gt;&amp;lt;ns:customInfo&amp;gt;CustomHeader&amp;lt;/ns:customInfo&amp;gt;&amp;lt;/ns:sampleCustomHeader&amp;gt;);&lt;/script&gt;
             &lt;log level="full"&gt;
                &lt;property name="Message" value="UpdatedMessage"/&gt;
             &lt;/log&gt;
             &lt;drop/&gt;
          &lt;/inSequence&gt;
       &lt;/target&gt;
       &lt;description/&gt;
    &lt;/proxy&gt;</code></pre>

<h4 id="example-per-method">Example per method<a class="headerlink" href="#example-per-method" title="Permanent link">&para;</a></h4>
<p>The following table contains examples of how some of the commonly used
methods can be included in the script invoked by the following sample
Script mediator configuration.</p>
<pre class="codehilite"><code class="language-xml linenums">      &lt;script language="js"
                     key="conf:/repository/EI/transform.js"
                     function="transform"/&gt;</code></pre>

<table>
<thead>
<tr class="header">
<th>Return?</th>
<th>Method Name</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Yes</td>
<td>getPayloadXML()</td>
<td><div class="content-wrapper">
<p>The script invoked can be as follows.</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb1" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: js; gutter: false; theme: Confluence"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">// sample.js02.function transformRequestFunction(mc) {</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">var</span> symbol <span class="op">=</span> <span class="va">mc</span>.<span class="at">getPayloadXML</span>()..<span class="op">*::</span><span class="va">Code</span>.<span class="at">toString</span>()<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="va">mc</span>.<span class="at">setPayloadXML</span>(</span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="op">&lt;</span>m<span class="op">:</span>getquote m<span class="op">=</span><span class="st">&quot;http://services.samples&quot;</span><span class="op">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>        <span class="op">&lt;</span>m<span class="op">:</span>request<span class="op">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>            <span class="op">&lt;</span>m<span class="op">:</span>symbol<span class="op">&gt;{</span>symbol<span class="op">}</span>&lt;/m<span class="op">:</span>symbol<span class="op">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>        &lt;/m<span class="op">:</span>request<span class="op">&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    &lt;/m<span class="op">:</span>getquote<span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>}</span></code></pre></div>
</div>
</div>
<p><code>               mc.getPayloadXML()              </code> returns the response received in XML form.</p>
</div></td>
</tr>
<tr class="even">
<td>No</td>
<td>setPayloadXML(payload)</td>
<td>See the example above for the <code>             getPayloadXML()            </code> method. <code>             mc.setPayloadXML(            </code> <code>             &lt;m:getquote m="http://services.samples"&gt;             &lt;m:request&gt;             &lt;m:symbol&gt;{symbol}&lt;/m:symbol             &lt;/m:request&gt;             &lt;/m:getquote&gt;            </code> <code>             )            </code> is used in that script to set the XML representation of the SOAP body (obtained using the <code>             getPayloadXML()            </code> method) to the current message context.</td>
</tr>
<tr class="odd">
<td>No</td>
<td>addHeader(mustUnderstand, Object content)</td>
<td><div class="content-wrapper">
<p>The script invoked can be as follows.</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb2" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: js; gutter: false; theme: Confluence"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">&lt;</span>script language<span class="op">=</span><span class="st">&quot;js&quot;</span><span class="op">&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="op">&lt;!</span>[CDATA[</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw">var</span> wsse <span class="op">=</span> <span class="kw">new</span> <span class="at">Namespace</span>(<span class="st">&#39;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&#39;</span>)<span class="op">;</span> </span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">var</span> envelope <span class="op">=</span> <span class="va">mc</span>.<span class="at">getEnvelopeXML</span>()<span class="op">;</span> </span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw">var</span> username <span class="op">=</span> <span class="va">envelope</span>..<span class="at">wsse</span><span class="op">::</span><span class="va">Username</span>.<span class="at">toString</span>()<span class="op">;</span> </span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="kw">var</span> password <span class="op">=</span> <span class="va">envelope</span>..<span class="at">wsse</span><span class="op">::</span><span class="va">Password</span>.<span class="at">toString</span>()<span class="op">;</span>   </span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="va">mc</span>.<span class="at">addHeader</span>(<span class="kw">false</span><span class="op">,</span> <span class="op">&lt;</span>urn<span class="op">:</span>AuthenticationInfo<span class="op">&gt;&lt;</span>urn<span class="op">:</span>userName<span class="op">&gt;{</span>username<span class="op">}</span>&lt;/urn<span class="op">:</span>userName<span class="op">&gt;&lt;</span>urn<span class="op">:</span>password<span class="op">&gt;{</span>password<span class="op">}</span>&lt;/urn<span class="op">:</span>password<span class="op">&gt;</span>&lt;/urn<span class="op">:</span>AuthenticationInfo<span class="op">&gt;</span>)<span class="op">;</span> </span>
<span id="cb2-8"><a href="#cb2-8"></a>]]<span class="op">&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>&lt;/script<span class="op">&gt;</span> </span></code></pre></div>
</div>
</div>
<p>The <code>               addHeader              </code> method configured as</p>
<p><code>               mc.addHeader(false, &lt;urn:AuthenticationInfo&gt;&lt;urn:userName&gt;{username}&lt;/urn:userName&gt;&lt;urn:password&gt;{password}&lt;/urn:password&gt;&lt;/urn:AuthenticationInfo&gt;)              </code> in the above script is used to extract user name and password values included in the request and add them to the header structure required for the backend service.</p>
</div></td>
</tr>
<tr class="even">
<td>No</td>
<td>getEnvelopeXML()</td>
<td><div class="content-wrapper">
<p>The script invoked can be as follows.</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb3" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: js; gutter: false; theme: Confluence"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&lt;</span>script language<span class="op">=</span><span class="st">&quot;js&quot;</span><span class="op">&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">&lt;!</span>[CDATA[</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">var</span> wsse <span class="op">=</span> <span class="kw">new</span> <span class="at">Namespace</span>(<span class="st">&#39;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&#39;</span>)<span class="op">;</span> </span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="kw">var</span> envelope <span class="op">=</span> <span class="va">mc</span>.<span class="at">getEnvelopeXML</span>()<span class="op">;</span> </span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw">var</span> username <span class="op">=</span> <span class="va">envelope</span>..<span class="at">wsse</span><span class="op">::</span><span class="va">Username</span>.<span class="at">toString</span>()<span class="op">;</span> </span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">var</span> password <span class="op">=</span> <span class="va">envelope</span>..<span class="at">wsse</span><span class="op">::</span><span class="va">Password</span>.<span class="at">toString</span>()<span class="op">;</span>   </span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="va">mc</span>.<span class="at">addHeader</span>(<span class="kw">false</span><span class="op">,</span> <span class="op">&lt;</span>urn<span class="op">:</span>AuthenticationInfo<span class="op">&gt;&lt;</span>urn<span class="op">:</span>userName<span class="op">&gt;{</span>username<span class="op">}</span>&lt;/urn<span class="op">:</span>userName<span class="op">&gt;&lt;</span>urn<span class="op">:</span>password<span class="op">&gt;{</span>password<span class="op">}</span>&lt;/urn<span class="op">:</span>password<span class="op">&gt;</span>&lt;/urn<span class="op">:</span>AuthenticationInfo<span class="op">&gt;</span>)<span class="op">;</span> ]]<span class="op">&gt;</span> &lt;/script<span class="op">&gt;</span> </span></code></pre></div>
</div>
</div>
<pre><code>See more at: http://sajithblogs.blogspot.com/2013/08/wso2-EI-adding-complex-soap-headers-to.html#sthash.jqpiEmf0.dpuf</code></pre>
</div></td>
</tr>
<tr class="odd">
<td>Yes</td>
<td>getPayloadJSON()</td>
<td><div class="content-wrapper">
<p>The script invoked can be as follows.</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb5" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: js; gutter: false; theme: Confluence"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">function</span> <span class="at">transform</span>(mc) <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>    payload <span class="op">=</span> <span class="va">mc</span>.<span class="at">getPayloadJSON</span>()<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    results <span class="op">=</span> <span class="va">payload</span>.<span class="at">results</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="kw">var</span> response <span class="op">=</span> <span class="kw">new</span> <span class="at">Array</span>()<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="cf">for</span> (i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">results</span>.<span class="at">length</span><span class="op">;</span> <span class="op">++</span>i) <span class="op">{</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>        location_object <span class="op">=</span> results[i]<span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>        l <span class="op">=</span> <span class="kw">new</span> <span class="at">Object</span>()<span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>        <span class="va">l</span>.<span class="at">name</span> <span class="op">=</span> <span class="va">location_object</span>.<span class="at">name</span><span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>        <span class="va">l</span>.<span class="at">tags</span> <span class="op">=</span> <span class="va">location_object</span>.<span class="at">types</span><span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>        <span class="va">l</span>.<span class="at">id</span> <span class="op">=</span> <span class="st">&quot;ID:&quot;</span> <span class="op">+</span> (<span class="va">location_object</span>.<span class="at">id</span>)<span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>        response[i] <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="op">}</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>    <span class="va">mc</span>.<span class="at">setPayloadJSON</span>(response)<span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<p><code>               mc.getPayloadJSON()              </code> returns the JSON payload (received as the response) as a JavaScript object. This object can be manipulated as a normal JavaScript variable within a script as shown in the above JavaScript code. See <a href="https://docs.wso2.com/display/EI650/Working+with+JSON+Message+Payloads#WorkingwithJSONMessagePayloads-Script">JSON Support</a> for further information about how this script is used.</p>
<p><br />
</p>
</div></td>
</tr>
<tr class="even">
<td>No</td>
<td>setPayloadJSON(payload)</td>
<td><p>See the example script for the <code>              getPayloadJSON()             </code> method.</p>
<p>The <code>              mc.setPayloadJSON()             </code> method can be used to replace the existing payload with a new payload. In the above script, we build a new array object by using the fields of the incoming JSON payload and set that array object as the new payload. See <a href="https://docs.wso2.com/display/EI650/Working+with+JSON+Message+Payloads#WorkingwithJSONMessagePayloads-Script">JSON Support</a> for further information about how this script is used</p></td>
</tr>
<tr class="odd">
<td>Yes</td>
<td>getProperty (name)</td>
<td><div class="content-wrapper">
<p>The script invoked can be as follows.</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb6" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: java; gutter: false; theme: Confluence"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1"></a>&lt;script language=<span class="st">&quot;js&quot;</span>&gt;</span>
<span id="cb6-2"><a href="#cb6-2"></a>&lt;![CDATA[</span>
<span id="cb6-3"><a href="#cb6-3"></a> var time1 = mc.<span class="fu">getProperty</span>(<span class="st">&quot;TIME_1&quot;</span>);</span>
<span id="cb6-4"><a href="#cb6-4"></a> var time2 = mc.<span class="fu">getProperty</span>(<span class="st">&quot;TIME_2&quot;</span>);</span>
<span id="cb6-5"><a href="#cb6-5"></a> var timeTaken = time2 - time1;</span>
<span id="cb6-6"><a href="#cb6-6"></a> <span class="fu">print</span>(<span class="st">&quot;Time Duration :  &quot;</span> + timeTaken + <span class="st">&quot; ms &quot;</span>);</span>
<span id="cb6-7"><a href="#cb6-7"></a> mc.<span class="fu">setProperty</span>(<span class="st">&quot;RESPONSE_TIME&quot;</span>, timeTaken);</span>
<span id="cb6-8"><a href="#cb6-8"></a>]]&gt;</span>
<span id="cb6-9"><a href="#cb6-9"></a>&lt;/script&gt;</span></code></pre></div>
</div>
</div>
<p>In this example, the <code>               getProperty              </code> method is used to get two time durations. The difference between the two time durations is calculated and the <code>               setProperty              </code> method is used to set this difference in the message context.</p>
</div></td>
</tr>
<tr class="even">
<td>No</td>
<td>setProperty(property)</td>
<td><div class="content-wrapper">
<p>See the example for the <code>               getProperty              </code> method. The <code>               setProperty              </code> method is used to set the response time calculated from the time durations obtained (using the <code>               getProperty              </code> method) in the message context.</p>
!!! note
<p>In the ESB profile due to a Rhino engine upgrade, when strings are concatenated and set as a property in the message context, you need to use the toString() method to convert the result to a string.</p>
<p>In the following example, <strong>var result = "a"</strong> and then <strong>result = result + "b"</strong> . When concatenating these strings, the script invoked needs to be as follows:</p>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
<div class="sourceCode" id="cb7" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence" style="brush: xml; gutter: false; theme: Confluence"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">&lt;script</span><span class="ot"> language=</span><span class="st">&quot;js&quot;</span><span class="kw">&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="bn">&lt;![CDATA[</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>{var result = &quot;a&quot;;</span>
<span id="cb7-4"><a href="#cb7-4"></a> result = result + &quot;b&quot;;</span>
<span id="cb7-5"><a href="#cb7-5"></a> mc.setProperty(&#39;result_str&#39;, result.toString()); </span>
<span id="cb7-6"><a href="#cb7-6"></a>}<span class="bn">]]&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="kw">&lt;/script&gt;</span></span></code></pre></div>
</div>
</div>

<p><br />
</p>
</div></td>
</tr>
</tbody>
</table>

<h4 id="samples">Samples<a class="headerlink" href="#samples" title="Permanent link">&para;</a></h4>
<p>The following samples demonstrate how to use the Script mediator.</p>
<ul>
<li><a href="https://docs.wso2.com/display/EI6xx/Sample+350%3A+Introduction+to+the+Script+Mediator+Using+JavaScript">Sample 350: Introduction to the Script Mediator Using
    JavaScript</a></li>
<li><a href="https://docs.wso2.com/display/EI6xx/Sample+351%3A+Inline+script+mediation+with+JavaScript">Sample 351: Inline script mediation with
    JavaScript</a></li>
<li><a href="https://docs.wso2.com/display/EI6xx/Sample+352%3A+Accessing+Synapse+message+context+API+using+a+scripting+language">Sample 352: Accessing Synapse message context API using a scripting
    language</a></li>
<li><a href="https://docs.wso2.com/display/EI6xx/Sample+353%3A+Using+Ruby+Scripts+for+Mediation">Sample 353: Using Ruby Scripts for
    Mediation</a></li>
<li><a href="https://docs.wso2.com/display/EI6xx/Sample+354%3A+Using+Inline+Ruby+Scripts+for+Mediation">Sample 354: Using Inline Ruby Scripts for
    Mediation</a></li>
</ul>
<p>See also <a href="https://docs.wso2.com/display/EI6xx/Sample+441%3A+Converting+JSON+to+XML+Using+JavaScript">Sample 441: Converting JSON to XML Using
JavaScript</a></p>
                
                  
                
              
  <a href="#" class="cd-top text--replace js-cd-top">Top</a>

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            WSO2 Enterprise Integrator - Documentation
          </div>
        
        &copy;2019 <a href="https://wso2.com/">WSO2</a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../assets/js/theme.js"></script>
      
        <script src="../../assets/lib/backtotop/js/util.js"></script>
      
        <script src="../../assets/lib/backtotop/js/main.js"></script>
      
    
  </body>
</html>